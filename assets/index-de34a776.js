import{d as e,b as a,t,c as o,g as l,f as n,h as s,a as u,_ as r}from"./ripple-47ea40fa.js";/* empty css                  *//* empty css             */import{I as i}from"./base-3d7462b4.js";import{G as c,a as v}from"./index-4fab6589.js";/* empty css              */import{d,r as m,c as f,w as p,a as h,b as g,e as b,p as w,v as y,n as S,j as x,f as j,u as N,x as T,s as C,g as M,h as V,C as k,l as I,F as R,E as D}from"./index-21254b6f.js";import{u as E}from"./useEventListener-43481130.js";import{u as _}from"./useMounted-89096fae.js";import"./with-install-460172ae.js";import"./constant-1f96826c.js";import"./use-route-30d0c75e.js";import"./index-e4150b28.js";var B={modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},animationDuration:{type:[Number,String],default:300},successDuration:{type:[Number,String],default:2e3},bgColor:{type:String},successBgColor:{type:String},color:{type:String},successColor:{type:String},target:{type:[String,Object]},onRefresh:e(),"onUpdate:modelValue":e()};function O(e,a,t,o,l,n,s){try{var u=e[n](s),r=u.value}catch(i){return void t(i)}u.done?a(r):Promise.resolve(r).then(o,l)}function P(e){return function(){var a=this,t=arguments;return new Promise((function(o,l){var n=e.apply(a,t);function s(e){O(n,o,l,s,u,"next",e)}function u(e){O(n,o,l,s,u,"throw",e)}s(void 0)}))}}var{n:Y,classes:L}=o("pull-refresh");var U=d({name:"VarPullRefresh",components:{VarIcon:i},props:B,setup(e){var o,r,i=m(0),c=m(null),v=m(null),d=m(0),h=m("-125%"),g=m("arrow-down"),b=m("default"),w=m(!1),y=0,S=0,x=function(){var e=P((function*(e){if(g.value!==e)return g.value=e,new Promise((e=>{window.setTimeout(e,150)}))}));return function(a){return e.apply(this,arguments)}}(),j=f((()=>"loading"!==b.value&&"success"!==b.value&&!e.disabled)),T=f((()=>({transform:"translate3d(0px, "+(a(h.value)?h.value:h.value+"px")+", 0px) translate(-50%, 0)",transition:w.value?"transform "+e.animationDuration+"ms":void 0,background:M.value?e.successBgColor:e.bgColor,color:M.value?e.successColor:e.color}))),C=f((()=>Math.abs(2*i.value))),M=f((()=>"success"===b.value)),V=e=>{("classList"in o?o:document.body).classList[e](Y()+"--lock")},k=e=>{if(j.value&&!(r!==o&&n(r)>0)){var a=n(o);if(!(a>0)){var t=0===a,l=e.touches[0];S=l.clientY-y,t&&S>=0&&e.preventDefault(),"pulling"!==b.value&&(b.value="pulling",d.value=e.touches[0].clientY),t&&h.value>i.value&&V("add");var s=(e.touches[0].clientY-d.value)/2+i.value;h.value=s>=C.value?C.value:s,x(h.value>=.2*C.value?"refresh":"arrow-down")}}},I=function(){var a=P((function*(){j.value&&(w.value=!0,h.value>=.2*C.value?(yield x("refresh"),b.value="loading",h.value=.3*C.value,u(e["onUpdate:modelValue"],!0),N((()=>{u(e.onRefresh)})),V("remove")):(b.value="loosing",g.value="arrow-down",h.value=i.value,setTimeout((()=>{w.value=!1,V("remove")}),t(e.animationDuration))),r=null)}));return function(){return a.apply(this,arguments)}}();return p((()=>e.modelValue),(a=>{!1===a&&(w.value=!0,b.value="success",g.value="checkbox-marked-circle",setTimeout((()=>{h.value=i.value,setTimeout((()=>{b.value="default",g.value="arrow-down",w.value=!1}),t(e.animationDuration))}),t(e.successDuration)))})),_((()=>{o=e.target?s(e.target,"PullRefresh"):l(c.value)})),E(c,"touchmove",k),{n:Y,classes:L,ICON_TRANSITION:150,refreshStatus:b,freshNode:c,controlNode:v,touchStart:e=>{if(0===i.value){var{width:a}=v.value.getBoundingClientRect();i.value=-(a+.25*a)}y=e.touches[0].clientY,S=0,r=l(e.target)},touchMove:k,touchEnd:I,iconName:g,controlStyle:T,isSuccess:M}}});U.render=function(e,a){var t=h("var-icon");return g(),b("div",{ref:"freshNode",class:S(e.n()),onTouchstart:a[0]||(a[0]=function(){return e.touchStart&&e.touchStart(...arguments)}),onTouchend:a[1]||(a[1]=function(){return e.touchEnd&&e.touchEnd(...arguments)}),onTouchcancel:a[2]||(a[2]=function(){return e.touchEnd&&e.touchEnd(...arguments)})},[w("div",{ref:"controlNode",class:S(e.classes(e.n("control"),e.n("$-elevation--2"),[e.isSuccess,e.n("control-success")])),style:x(e.controlStyle)},[y(t,{name:e.iconName,transition:e.ICON_TRANSITION,class:S(e.classes(e.n("icon"),["loading"===e.refreshStatus,e.n("animation")])),"var-pull-refresh-cover":""},null,8,["name","transition","class"])],6),j(e.$slots,"default")],34)};const $=U;$.install=function(e){e.component($.name,$)};var z=$;const A=w("div",{class:"h-64 w-full"},[w("img",{src:"/assets/home-4b994d36.png",class:"w-full h-full"}),w("div",{class:"absolute left-5 top-3 z-50 text-white"},"欢迎你,柯俊男")],-1),q={class:"w-full px-5 mt-16"},F={__name:"index",setup(e){const a=T(),t=m(!1),o=m(),l=()=>[{icon:"description",dot:Math.floor(100*Math.random()),label:"日常走访",path:"/todo/dailyvisit"},{icon:"aim",dot:Math.floor(100*Math.random()),label:"专项走访",path:"/todo/specializedvisit"},{icon:"location-o",dot:Math.floor(100*Math.random()),label:"日常巡视",path:"/todo/dailyinspection"},{icon:"smile-o",dot:Math.floor(100*Math.random()),label:"专项巡视",path:"/todo/specialinspection"}],n=()=>{setTimeout((()=>{o.value=l(),t.value=!1}),2e3)};return C((()=>{o.value=l()})),(e,l)=>{const s=c,u=v,i=z,d=r;return g(),M(i,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),onRefresh:n},{default:V((()=>[A,w("div",q,[y(u,{"column-num":2,class:"shadow-lg"},{default:V((()=>[(g(!0),b(R,null,k(o.value,(e=>I((g(),M(s,{key:e.label,icon:e.icon,text:e.label,badge:e.dot,onClick:t=>((e,t,o)=>{const l=t+(o?`(${o})`:"");a.setNavTitle(l),D.push(e)})(e.path,e.label,e.dot)},null,8,["icon","text","badge","onClick"])),[[d]]))),128))])),_:1})])])),_:1},8,["modelValue"])}}};export{F as default};
