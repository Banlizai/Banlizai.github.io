import{s as f}from"./index-09e9d0bf.js";import{M as g}from"./@arco-design-f5decd74.js";function m({url:s,data:n,method:r,headers:o,beforeRequest:a,afterRequest:e}){const c=t=>{if(t.data.code===200)return t.data;throw g.error(t.data.message||"请求失败，未知异常"),new Error(t.data.message||"请求失败，未知异常")},i=t=>{throw e&&e(),new Error(t.message||"请求失败，未知异常")};a&&a(),r=r||"GET";const p=Object.assign(typeof n=="function"?n():n||{},{});return r==="GET"?f.get(s,{params:p,headers:o}).then(c,i):f.post(s,p,{headers:o}).then(c,i)}function E({url:s,data:n,method:r="POST",headers:o,beforeRequest:a,afterRequest:e}){return m({url:s,method:r,data:n,headers:o,beforeRequest:a,afterRequest:e})}export{E as p};
