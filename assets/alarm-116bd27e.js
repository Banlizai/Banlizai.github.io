import{n as a,M as e,s,B as t,x as l,a as i,b as o,v as r,Z as n,$ as c,a0 as u,i as d,V as m}from"./@arco-design-8dabd30f.js";import{A as p,n as j}from"./index-0ca45986.js";import{u as v}from"./dict-9c237ae6.js";import{d as f,u as y,h,l as g,o as b,c as k,s as _,w,F as x,R as V,m as C,f as U,D as q,C as I,q as P,a1 as z,n as B,X as L,aX as N,aV as D}from"./@vue-2b41ce19.js";import"./b-tween-5055d79e.js";import"./b-validate-457088db.js";import"./resize-observer-polyfill-ad543aa3.js";import"./scroll-into-view-if-needed-59a60a09.js";import"./compute-scroll-into-view-2962e95c.js";import"./number-precision-d9b928a1.js";import"./dayjs-094145ee.js";import"./@logicflow-85f8458e.js";import"./ids-ef071351.js";import"./lodash-es-1e3e3aa2.js";import"./preact-5fc9b0bf.js";import"./pinia-b3c1485e.js";import"./axios-6371c10e.js";import"./qs-f981fe00.js";import"./side-channel-01aeb4d9.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./call-bind-fae29077.js";import"./object-inspect-0eda087e.js";import"./path-browserify-8c7c24dd.js";import"./vue-router-70e2faff.js";import"./@vueuse-ca9a384d.js";import"./tiny-emitter-35dc7566.js";import"./echarts-24943dbb.js";import"./zrender-2d3b2bba.js";import"./tslib-a4e99503.js";import"./xgplayer-700bd6a3.js";import"./delegate-ef66b241.js";import"./downloadjs-91c0ea73.js";import"./quill-ecb3881d.js";import"./sortablejs-2f5483e3.js";const F=a=>(N("data-v-8d00a179"),a=a(),D(),a),O={class:"main-container"},R={class:"text-xs"},X=F((()=>U("span",null,"告警状态",-1))),A=F((()=>U("span",null,"告警级别",-1))),E=F((()=>U("div",{className:"custom-radio-card-mask"},[U("div",{className:"custom-radio-card-mask-dot"})],-1))),H={className:"custom-radio-card-title"},J=j(f({__name:"alarm",setup(j){const{alarmLevel:N}=v();async function D(){try{const{data:a}=await(async()=>await p({url:"/ipmanage/rule/list"}))();F.value=a}catch(a){}}const F=y([]),J=y(""),M=y(!1),Z=f({setup:()=>()=>L(m,{placeholder:"请输入IP地址","onUpdate:modelValue":a=>J.value=a,modelValue:J.value,"allow-clear":!0})});async function $(a){M.value=!0;try{const e={ipList:a.list&&[...null==a?void 0:a.list,J.value],id:a.id,level:a.level,status:a.status},{msg:s}=await(async a=>await p({url:"/ipmanage/rule/updateRule",data:a}))(e);return J.value="",M.value=!1,D(),Promise.resolve({msg:s})}catch(e){return Promise.reject(e)}}return h(D),(m,p)=>{const j=s,v=t,f=g("icon-delete"),y=l,h=i,D=o,G=r,K=n,Q=c,S=u,T=d;return b(),k("div",O,[_(K,{direction:"vertical",fill:""},{default:w((()=>[(b(!0),k(x,null,V(F.value,(s=>(b(),C(T,{key:s.id,bordered:!1},{title:w((()=>[U("span",null,q(s.target),1),_(j,{direction:"vertical"}),U("span",R,q(s.explainInfo),1)])),extra:w((()=>[5===s.id?(b(),C(v,{key:0,type:"primary",onClick:t=>function(s){a.info({title:"添加白名单",content:()=>L(Z),okLoading:M.value,draggable:!0,simple:!0,onBeforeOk:a=>{J.value?a(!0):(e.error("请输入IP地址"),a(!1))},onOk:()=>{$(s)}})}(s)},{default:w((()=>[I(" 添加 ")])),_:2},1032,["onClick"])):P("",!0)])),default:w((()=>[5===s.id?(b(),C(D,{key:0,scrollbar:"",size:"small","max-height":400},{default:w((()=>[(b(!0),k(x,null,V(s.list,(a=>(b(),C(h,null,{extra:w((()=>[_(v,{type:"text",onClick:e=>async function(a,e){a.list=a.list.filter((a=>a!==e)),await $(a)}(s,a)},{default:w((()=>[_(y,{content:"删除"},{default:w((()=>[_(f)])),_:1})])),_:2},1032,["onClick"])])),default:w((()=>[I(q(a)+" ",1)])),_:2},1024)))),256))])),_:2},1024)):1===s.id||2===s.id||3===s.id||4===s.id?(b(),C(K,{key:1,class:"flex justify-between"},{default:w((()=>[_(K,null,{default:w((()=>[X,_(G,{type:"round",modelValue:s.status,"onUpdate:modelValue":a=>s.status=a,"checked-value":!1,"unchecked-value":!0,beforeChange:a=>async function(a,s){s.status=a;try{const{msg:a}=await $(s);return e.success(a),!0}catch(t){return!1}}(a,s)},{checked:w((()=>[I(" 启用 ")])),unchecked:w((()=>[I(" 停用 ")])),_:2},1032,["modelValue","onUpdate:modelValue","beforeChange"])])),_:2},1024),_(K,null,{default:w((()=>[A,_(S,{modelValue:s.level,"onUpdate:modelValue":a=>s.level=a,onChange:a=>async function(a){try{const{msg:s}=await $(a);e.success(s)}catch(s){}}(s)},{default:w((()=>[(b(!0),k(x,null,V(z(N),(a=>(b(),C(Q,{key:a.value,value:a.value},{radio:w((({checked:e})=>[_(K,{align:"start",class:B(["custom-radio-card",{"custom-radio-card-checked":e}])},{default:w((()=>[E,U("div",H,q(a.label),1)])),_:2},1032,["class"])])),_:2},1032,["value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1024)])),_:2},1024)):P("",!0)])),_:2},1024)))),128))])),_:1})])}}}),[["__scopeId","data-v-8d00a179"]]);export{J as default};
