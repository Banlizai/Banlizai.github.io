import{d as e,c as a,i as t,a as o,n,u as i,e as l,R as s}from"./ripple-43a9ce2b.js";/* empty css                  */import{B as r}from"./button-78822281.js";/* empty css             */import{B as c}from"./badge-cfb126a4.js";import{I as v,_ as u}from"./base-16942280.js";/* empty css              */import{d,r as m,c as p,w as f,o as b,a as g,b as h,e as y,f as x,g as k,h as C,m as B,i as T,n as I,j as N,k as j,l as O,p as A,F as _,q as S,t as w,s as R,u as $,v as P,_ as E,x as V,y as z,z as D,K as L,A as M,B as F}from"./index-1f6600ba.js";import{u as U}from"./nav-6724e49b.js";import{w as q,a as H,u as Y,c as G,n as K,t as Q,g as J,b as W}from"./with-install-1b1d642c.js";import{o as X}from"./on-popup-reopen-0311b108.js";import{I as Z}from"./index-9ee83766.js";import{H as ee,B as ae}from"./constant-1f96826c.js";import{u as te}from"./useChildren-141327ae.js";import{u as oe}from"./useMounted-d09bbcd9.js";var ne={active:{type:[Number,String],default:0},fixed:{type:Boolean,default:!1},border:{type:Boolean,default:!1},safeArea:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},activeColor:{type:String},inactiveColor:{type:String},onChange:e(),"onUpdate:active":e(),onBeforeChange:e(),onFabClick:e(),fabProps:{type:Object}},ie=Symbol("BOTTOM_NAVIGATION_BIND_BOTTOM_NAVIGATION_ITEM_KEY");function le(){return le=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},le.apply(this,arguments)}var{n:se,classes:re}=a("bottom-navigation"),{n:ce}=a("bottom-navigation-item"),ve=ce("--right-half-space"),ue=ce("--left-half-space"),de=ce("--right-space"),me={type:"primary"};var pe=d({name:"VarBottomNavigation",components:{VarButton:r},props:ne,setup(e,a){var{slots:i}=a,l=m(null),s=p((()=>e.active)),r=p((()=>e.activeColor)),c=p((()=>e.inactiveColor)),v=m({}),{length:u,bottomNavigationItems:d,bindBottomNavigationItem:g}=function(){var{childProviders:e,length:a,bindChildren:t}=te(ie);return{length:a,bottomNavigationItems:e,bindBottomNavigationItem:t}}(),h=()=>d.find((e=>{var{name:a}=e;return s.value===a.value})),y=()=>d.find((e=>{var{index:a}=e;return s.value===a.value})),x=()=>{t(s.value)&&(s.value<0?o(e["onUpdate:active"],0):s.value>u.value-1&&o(e["onUpdate:active"],u.value-1))},k=a=>{var t=n(o(e.onBeforeChange,a));Promise.all(t).then((e=>{e.every(Boolean)&&C(a)}))},C=a=>{o(e["onUpdate:active"],a),o(e.onChange,a)},B=e=>{var a=I(),t=a.length,o=e%2==0;a.forEach(((e,a)=>{T(o,e,a,t)}))},T=(e,a,t,o)=>{if(e||!(t===o-1)){var n=t===o/2;t===o/2-1?a.classList.add(ve):n&&a.classList.add(ue)}else a.classList.add(de)},I=()=>Array.from(l.value.querySelectorAll("."+ce()));return g({active:s,activeColor:r,inactiveColor:c,onToggle:a=>{s.value!==a&&(e.onBeforeChange?k(a):C(a))}}),f((()=>u.value),(()=>{0===u.value||h()||y()||x()})),f((()=>e.fabProps),(e=>{v.value=le({},me,e)}),{immediate:!0,deep:!0}),oe((()=>{i.fab&&B(u.value)})),b((()=>{I().forEach((e=>{e.classList.remove(ve,ue,de)})),i.fab&&B(u.value)})),{n:se,classes:re,length:u,bottomNavigationDom:l,handleFabClick:()=>{o(e.onFabClick)},fabProps:v}}});pe.render=function(e,a){var t=g("var-button");return h(),y("div",{class:I(e.classes(e.n(),e.n("$--box"),[e.fixed,e.n("--fixed")],[e.border,e.n("--border")],[e.safeArea,e.n("--safe-area")])),ref:"bottomNavigationDom",style:N("z-index:"+e.zIndex)},[x(e.$slots,"default"),e.$slots.fab?(h(),k(t,B({key:0,class:e.classes(e.n("fab"),[e.length%2,e.n("--fab-right"),e.n("--fab-center")]),"var-bottom-navigation__fab":"",onClick:e.handleFabClick},e.fabProps,{round:""}),{default:C((()=>[x(e.$slots,"fab")])),_:3},16,["class","onClick"])):T("v-if",!0)],6)};const fe=pe;fe.install=function(e){e.component(fe.name,fe)};var be=fe,ge={name:{type:String},icon:{type:String},label:{type:String},namespace:{type:String,default:"var-icon"},badge:{type:[Boolean,Object],default:!1},onClick:e()};var{n:he,classes:ye}=a("bottom-navigation-item"),xe={type:"danger",dot:!0};var ke=d({name:"VarBottomNavigationItem",components:{VarBadge:c,VarIcon:v},directives:{Ripple:s},props:ge,setup(e){var a=p((()=>e.name)),t=p((()=>e.badge)),n=m({}),{index:s,bottomNavigation:r,bindBottomNavigation:c}=function(){var{parentProvider:e,index:a,bindParent:t}=i(ie);return t||l("BottomNavigationItem","<var-bottom-navigation-item/> must in <var-bottom-navigation/>"),{index:a,bottomNavigation:e,bindBottomNavigation:t}}(),{active:v,activeColor:u,inactiveColor:d}=r;return c({name:a,index:s}),f((()=>t.value),(e=>{n.value=!0===e?xe:t.value}),{immediate:!0}),{n:he,classes:ye,index:s,active:v,badge:t,badgeProps:n,computeColorStyle:()=>v.value===a.value||v.value===s.value?u.value:d.value,handleClick:()=>{var t,n=null!=(t=a.value)?t:s.value;o(e.onClick,n),o(r.onToggle,n)}}}});ke.render=function(e,a){var t=g("var-icon"),o=g("var-badge"),n=j("ripple");return O((h(),y("button",{class:I(e.classes(e.n(),e.n("$--box"),[e.active===e.index||e.active===e.name,e.n("--active")])),style:N({color:e.computeColorStyle()}),onClick:a[0]||(a[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[e.icon&&!e.$slots.icon?(h(),k(t,{key:0,name:e.icon,namespace:e.namespace,class:I(e.n("icon")),"var-bottom-navigation-item-cover":""},null,8,["name","namespace","class"])):T("v-if",!0),x(e.$slots,"icon",{active:e.active===e.index||e.active===e.name}),e.badge?(h(),k(o,B({key:1},e.badgeProps,{class:e.n("badge"),"var-bottom-navigation-item-cover":""}),null,16,["class"])):T("v-if",!0),A("span",{class:I(e.n("label"))},[e.$slots.default?T("v-if",!0):(h(),y(_,{key:0},[S(w(e.label),1)],2112)),x(e.$slots,"default")],2)],6)),[[n]])};const Ce=ke;Ce.install=function(e){e.component(Ce.name,Ce)};var Be=Ce;function Te(e,a){const t=((e,a)=>{const t=m(),o=()=>{t.value=Y(e).height};return R((()=>{if($(o),a)for(let e=1;e<=3;e++)setTimeout(o,100*e)})),X((()=>$(o))),f([q,H],o),t})(e,!0);return e=>P("div",{class:a("placeholder"),style:{height:t.value?`${t.value}px`:void 0}},[e()])}const[Ie,Ne]=G("nav-bar");const je=W(d({name:Ie,props:{title:String,fixed:Boolean,zIndex:K,border:Q,leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:Q},emits:["clickLeft","clickRight"],setup(e,{emit:a,slots:t}){const o=m(),n=Te(o,Ne),i=e=>a("clickLeft",e),l=e=>a("clickRight",e),s=()=>{const{title:a,fixed:n,border:s,zIndex:r}=e,c=J(r),v=e.leftArrow||e.leftText||t.left,u=e.rightText||t.right;return P("div",{ref:o,style:c,class:[Ne({fixed:n}),{[ae]:s,"van-safe-area-top":e.safeAreaInsetTop}]},[P("div",{class:Ne("content")},[v&&P("div",{class:[Ne("left"),e.clickable?ee:""],onClick:i},[t.left?t.left():[e.leftArrow&&P(Z,{class:Ne("arrow"),name:"arrow-left"},null),e.leftText&&P("span",{class:Ne("text")},[e.leftText])]]),P("div",{class:[Ne("title"),"van-ellipsis"]},[t.title?t.title():a]),u&&P("div",{class:[Ne("right"),e.clickable?ee:""],onClick:l},[t.right?t.right():P("span",{class:Ne("text")},[e.rightText])])])])};return()=>e.fixed&&e.placeholder?n(s):s()}}));var Oe=(e=>(e.TODO="待办",e.SEARCH="查询",e.REPORT="看板",e.MY="我的",e.QRCODE="条形码",e))(Oe||{});const Ae={class:"text-white"},_e=E({__name:"index",setup(e){const a=U(),{TODO:t,SEARCH:o,REPORT:n,MY:i,QRCODE:l}=Oe,s=[{key:"todo",label:t,icon:"minus-box"},{key:"search",label:o,icon:"minus-box"},{key:"report",label:n,icon:"minus-box"},{key:"my",label:i,icon:"minus-box"}],r=V(),c=m(0),v=m(!0),d=m(!0),b=p((()=>a.getNavTitle));f((()=>r),(()=>{const e=s.some((e=>e.key===r.currentRoute.value.path.replace("/","")));c.value=s.findIndex((e=>e.key===r.currentRoute.value.path.replace("/",""))),v.value=e,d.value=e}),{deep:!0,immediate:!0});const x=()=>{a.setNavTitle(l),r.push("/qrcode")},B=()=>{r.go(-1)};return(e,t)=>{const o=Z,n=je,l=g("RouterView"),d=Be,m=u,p=be;return h(),y(_,null,[O(P(n,{title:D(b),"left-arrow":!v.value,onClickLeft:B,class:"navBar"},{title:C((()=>[A("p",Ae,w(D(b)),1)])),left:C((()=>[O(P(o,{name:"arrow-left",class:"text-white"},null,512),[[z,!v.value]])])),_:1},8,["title","left-arrow"]),[[z,D(b)!==D(i)]]),A("div",{class:I(["main-page bg-gray-50",{tabbar:v.value}])},[e.$route.meta.keepAlive?(h(),k(l,{key:0},{default:C((({Component:a})=>[(h(),k(L,null,[(h(),k(M(a),{key:e.$route.path}))],1024))])),_:1})):T("",!0),e.$route.meta.keepAlive?T("",!0):(h(),k(l,{key:e.$route.path}))],2),O(P(p,{"z-index":"888","safe-area":!0,fixed:"",active:c.value,"onUpdate:active":t[0]||(t[0]=e=>c.value=e)},{fab:C((()=>[P(m,{name:"barcode-scan",onClick:x})])),default:C((()=>[(h(),y(_,null,F(s,((e,t)=>P(d,{key:e.key,icon:e.icon,label:e.label,onClick:o=>(({key:e,label:t},o)=>{r.push(e),c.value=o,a.setNavTitle(t)})(e,t)},null,8,["icon","label","onClick"]))),64))])),_:1},8,["active"]),[[z,v.value]])],64)}}},[["__scopeId","data-v-e6d99b13"]]);export{_e as default};
