import{d as e,b as a,t,c as o,g as l,f as n,h as s,a as u,_ as r}from"./ripple-43a9ce2b.js";/* empty css                  *//* empty css             */import{I as i}from"./base-16942280.js";import{u as c,G as v,a as d}from"./index-d91040c4.js";/* empty css              */import{d as f,r as m,c as h,w as p,a as g,b,e as w,p as y,v as S,n as j,j as x,f as N,u as T,s as C,g as M,h as V,B as k,l as I,F as R,C as D}from"./index-1f6600ba.js";import{u as _}from"./nav-6724e49b.js";import{u as B}from"./useMounted-d09bbcd9.js";import"./with-install-1b1d642c.js";import"./constant-1f96826c.js";import"./use-route-2ce59ff4.js";import"./index-9ee83766.js";var E={modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},animationDuration:{type:[Number,String],default:300},successDuration:{type:[Number,String],default:2e3},bgColor:{type:String},successBgColor:{type:String},color:{type:String},successColor:{type:String},target:{type:[String,Object]},onRefresh:e(),"onUpdate:modelValue":e()};function O(e,a,t,o,l,n,s){try{var u=e[n](s),r=u.value}catch(i){return void t(i)}u.done?a(r):Promise.resolve(r).then(o,l)}function P(e){return function(){var a=this,t=arguments;return new Promise((function(o,l){var n=e.apply(a,t);function s(e){O(n,o,l,s,u,"next",e)}function u(e){O(n,o,l,s,u,"throw",e)}s(void 0)}))}}var{n:Y,classes:U}=o("pull-refresh");var $=f({name:"VarPullRefresh",components:{VarIcon:i},props:E,setup(e){var o,r,i=m(0),v=m(null),d=m(null),f=m(0),g=m("-125%"),b=m("arrow-down"),w=m("default"),y=m(!1),S=0,j=0,x=function(){var e=P((function*(e){if(b.value!==e)return b.value=e,new Promise((e=>{window.setTimeout(e,150)}))}));return function(a){return e.apply(this,arguments)}}(),N=h((()=>"loading"!==w.value&&"success"!==w.value&&!e.disabled)),C=h((()=>({transform:"translate3d(0px, "+(a(g.value)?g.value:g.value+"px")+", 0px) translate(-50%, 0)",transition:y.value?"transform "+e.animationDuration+"ms":void 0,background:V.value?e.successBgColor:e.bgColor,color:V.value?e.successColor:e.color}))),M=h((()=>Math.abs(2*i.value))),V=h((()=>"success"===w.value)),k=e=>{("classList"in o?o:document.body).classList[e](Y()+"--lock")},I=e=>{if(N.value&&!(r!==o&&n(r)>0)){var a=n(o);if(!(a>0)){var t=0===a,l=e.touches[0];j=l.clientY-S,t&&j>=0&&e.preventDefault(),"pulling"!==w.value&&(w.value="pulling",f.value=e.touches[0].clientY),t&&g.value>i.value&&k("add");var s=(e.touches[0].clientY-f.value)/2+i.value;g.value=s>=M.value?M.value:s,x(g.value>=.2*M.value?"refresh":"arrow-down")}}},R=function(){var a=P((function*(){N.value&&(y.value=!0,g.value>=.2*M.value?(yield x("refresh"),w.value="loading",g.value=.3*M.value,u(e["onUpdate:modelValue"],!0),T((()=>{u(e.onRefresh)})),k("remove")):(w.value="loosing",b.value="arrow-down",g.value=i.value,setTimeout((()=>{y.value=!1,k("remove")}),t(e.animationDuration))),r=null)}));return function(){return a.apply(this,arguments)}}();return p((()=>e.modelValue),(a=>{!1===a&&(y.value=!0,w.value="success",b.value="checkbox-marked-circle",setTimeout((()=>{g.value=i.value,setTimeout((()=>{w.value="default",b.value="arrow-down",y.value=!1}),t(e.animationDuration))}),t(e.successDuration)))})),B((()=>{o=e.target?s(e.target,"PullRefresh"):l(v.value)})),c(v,"touchmove",I),{n:Y,classes:U,ICON_TRANSITION:150,refreshStatus:w,freshNode:v,controlNode:d,touchStart:e=>{if(0===i.value){var{width:a}=d.value.getBoundingClientRect();i.value=-(a+.25*a)}S=e.touches[0].clientY,j=0,r=l(e.target)},touchMove:I,touchEnd:R,iconName:b,controlStyle:C,isSuccess:V}}});$.render=function(e,a){var t=g("var-icon");return b(),w("div",{ref:"freshNode",class:j(e.n()),onTouchstart:a[0]||(a[0]=function(){return e.touchStart&&e.touchStart(...arguments)}),onTouchend:a[1]||(a[1]=function(){return e.touchEnd&&e.touchEnd(...arguments)}),onTouchcancel:a[2]||(a[2]=function(){return e.touchEnd&&e.touchEnd(...arguments)})},[y("div",{ref:"controlNode",class:j(e.classes(e.n("control"),e.n("$-elevation--2"),[e.isSuccess,e.n("control-success")])),style:x(e.controlStyle)},[S(t,{name:e.iconName,transition:e.ICON_TRANSITION,class:j(e.classes(e.n("icon"),["loading"===e.refreshStatus,e.n("animation")])),"var-pull-refresh-cover":""},null,8,["name","transition","class"])],6),N(e.$slots,"default")],34)};const z=$;z.install=function(e){e.component(z.name,z)};var A=z;const L=y("div",{class:"h-64 w-full fixed top-0 left-0 z-40"},[y("div",{class:"w-full h-full bg-black"}),y("div",{class:"absolute left-5 top-3 z-50 text-white"},"欢迎你,柯俊男")],-1),q={class:"mt-56 w-full px-5"},F={__name:"index",setup(e){const a=_(),t=m(!1),o=m(),l=()=>[{icon:"description",dot:Math.floor(100*Math.random()),label:"日常走访",path:"/todo/dailyVisit"},{icon:"aim",dot:Math.floor(100*Math.random()),label:"专项走访"},{icon:"location-o",dot:Math.floor(100*Math.random()),label:"日常巡视"},{icon:"smile-o",dot:Math.floor(100*Math.random()),label:"专项巡视"}],n=()=>{setTimeout((()=>{o.value=l(),t.value=!1}),2e3)};return C((()=>{o.value=l()})),(e,l)=>{const s=v,u=d,i=A,c=r;return b(),M(i,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),onRefresh:n},{default:V((()=>[L,y("div",q,[S(u,{"column-num":2,class:"shadow-lg"},{default:V((()=>[(b(!0),w(R,null,k(o.value,(e=>I((b(),M(s,{key:e.label,icon:e.icon,text:e.label,badge:e.dot,onClick:t=>((e,t,o)=>{const l=t+(o?`(${o})`:"");a.setNavTitle(l),D.push(e)})(e.path,e.label,e.dot)},null,8,["icon","text","badge","onClick"])),[[c]]))),128))])),_:1})])])),_:1},8,["modelValue"])}}};export{F as default};
