import{s as e}from"./index-4d88e5a9.js";import{M as r}from"./@arco-design-306c64c5.js";function t({url:t,data:a,method:s="POST",headers:o,beforeRequest:d,afterRequest:n}){return function({url:t,data:a,method:s,headers:o,beforeRequest:d,afterRequest:n}){const u=e=>{if(200===e.data.code)return e.data;throw r.error(e.data.message||"请求失败，未知异常"),new Error(e.data.message||"请求失败，未知异常")},f=e=>{throw n&&n(),new Error(e.message||"请求失败，未知异常")};d&&d(),s=s||"GET";const h=Object.assign("function"==typeof a?a():a||{},{});return"GET"===s?e.get(t,{params:h,headers:o}).then(u,f):e.post(t,h,{headers:o}).then(u,f)}({url:t,method:s,data:a,headers:o,beforeRequest:d,afterRequest:n})}export{t as p};
