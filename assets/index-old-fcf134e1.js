import{M as s,V as e,aD as a,B as i,W as l,aa as r}from"./@arco-design-8dabd30f.js";import{u as o,b as t}from"./vue-router-70e2faff.js";import{H as m,P as d,Q as p,n as c}from"./index-0ca45986.js";import{j as n}from"./user-38648499.js";import{d as u,u as j,r as f,h as v,l as w,o as g,c as b,f as h,s as y,w as V,a1 as x,C as _,aX as z,aV as k}from"./@vue-2b41ce19.js";import{a as q}from"./@vueuse-ca9a384d.js";import"./b-tween-5055d79e.js";import"./b-validate-457088db.js";import"./resize-observer-polyfill-ad543aa3.js";import"./scroll-into-view-if-needed-59a60a09.js";import"./compute-scroll-into-view-2962e95c.js";import"./number-precision-d9b928a1.js";import"./dayjs-094145ee.js";import"./@logicflow-85f8458e.js";import"./ids-ef071351.js";import"./lodash-es-1e3e3aa2.js";import"./preact-5fc9b0bf.js";import"./pinia-b3c1485e.js";import"./axios-6371c10e.js";import"./qs-f981fe00.js";import"./side-channel-01aeb4d9.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./call-bind-fae29077.js";import"./object-inspect-0eda087e.js";import"./path-browserify-8c7c24dd.js";import"./tiny-emitter-35dc7566.js";import"./echarts-24943dbb.js";import"./zrender-2d3b2bba.js";import"./tslib-a4e99503.js";import"./xgplayer-700bd6a3.js";import"./delegate-ef66b241.js";import"./downloadjs-91c0ea73.js";import"./quill-ecb3881d.js";import"./sortablejs-2f5483e3.js";const U=s=>(z("data-v-5a312a46"),s=s(),k(),s),C={class:"login-container"},B={class:"center"},D=U((()=>h("div",{class:"left"},[h("img",{src:"/assets/bg_left-9784331d.png",class:"left-bg-img",alt:"bg"})],-1))),H={class:"form-wrapper"},S=U((()=>h("div",{class:"title"},"账号登录",-1))),A={class:"item-wrapper mt-2"},E={class:"item-wrapper mt-4"},F=U((()=>h("div",{class:"flex-1"},null,-1))),I={class:"item-wrapper mt-4 flex justify-between"},J={class:"w-2/3 h-full"},M={class:"w-1/3 h-full flex items-center justify-end"},P=["src"],Q={class:"mt-6"},W={class:"my-width flex-1 mt-4 mb-8"},X={class:"flex justify-between"},$=c(u({__name:"index-old",setup(c){const u=j(!0),z=j(!1),k=o(),U=t(),$=m(),G=f({username:"admin",password:"admin123",code:"",uuid:""}),K=j(""),L=q((async()=>{z.value=!0;try{const{data:e}=await d(G),{user:a,permissions:i,roles:l}=await n(e.access_token),r={token:e.access_token,...a,permissions:i,roles:l};await $.saveUser(r),$.changeAvatar(a.avatar),await k.replace({path:U.query.redirect?U.query.redirect:"/"}),s.success("登录成功，欢迎："+G.username)}catch(e){s.error(e.message)}finally{z.value=!1,N()}}),500),N=q((()=>{O()}),300),O=async()=>{const{img:s,uuid:e}=await p();G.uuid=e,K.value=`data:image/png;base64,${s}`};return v((()=>{O()})),(s,o)=>{const t=w("icon-mobile"),m=e,d=w("icon-lock"),p=a,c=i,n=l,j=r;return g(),b("div",C,[h("div",B,[D,h("div",H,[y(j,{model:G,onSubmit:x(L),size:"large"},{default:V((()=>[S,h("div",A,[y(m,{modelValue:G.username,"onUpdate:modelValue":o[0]||(o[0]=s=>G.username=s),placeholder:"请输入用户名/手机号","allow-clear":"",size:"large"},{prefix:V((()=>[y(t)])),_:1},8,["modelValue"])]),h("div",E,[y(p,{modelValue:G.password,"onUpdate:modelValue":o[1]||(o[1]=s=>G.password=s),placeholder:"请输入密码","allow-clear":"",size:"large"},{prefix:V((()=>[y(d)])),_:1},8,["modelValue"])]),F,h("div",I,[h("div",J,[y(m,{"allow-clear":"",size:"large",modelValue:G.code,"onUpdate:modelValue":o[2]||(o[2]=s=>G.code=s),placeholder:"请输入验证码"},null,8,["modelValue"])]),h("div",M,[h("img",{class:"w-4/5 h-8 rounded-sm",src:K.value,alt:"验证码",onClick:o[3]||(o[3]=(...s)=>x(N)&&x(N)(...s))},null,8,P)])]),h("div",Q,[y(c,{type:"primary",class:"login",loading:z.value,"html-type":"submit",size:"large"},{default:V((()=>[_(" 登录 ")])),_:1},8,["loading"])]),h("div",W,[h("div",X,[y(n,{modelValue:u.value,"onUpdate:modelValue":o[4]||(o[4]=s=>u.value=s)},{default:V((()=>[_("自动登录")])),_:1},8,["modelValue"])])])])),_:1},8,["model","onSubmit"])])])])}}}),[["__scopeId","data-v-5a312a46"]]);export{$ as default};
