import{d as e,c as a,i as t,a as o,n,u as l,e as i,R as s}from"./ripple-47ea40fa.js";/* empty css                  */import{B as r}from"./button-93237179.js";/* empty css             */import{B as c}from"./badge-c50989c0.js";import{I as v,_ as u}from"./base-3d7462b4.js";/* empty css              */import{d,r as m,c as p,w as f,o as b,a as g,b as h,e as y,f as x,g as k,h as C,m as B,i as T,n as I,j as N,k as j,l as _,p as A,F as O,q as S,t as w,s as $,u as P,v as R,_ as V,x as z,y as E,z as L,A as D,K as F,B as M,C as U,D as q}from"./index-21254b6f.js";import{w as G,a as H,u as K,c as Y,n as Q,t as J,g as W,b as X}from"./with-install-460172ae.js";import{o as Z}from"./on-popup-reopen-d10a579d.js";import{I as ee}from"./index-e4150b28.js";import{H as ae,B as te}from"./constant-1f96826c.js";import{u as oe}from"./useChildren-2c8006a3.js";import{u as ne}from"./useMounted-89096fae.js";var le={active:{type:[Number,String],default:0},fixed:{type:Boolean,default:!1},border:{type:Boolean,default:!1},safeArea:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},activeColor:{type:String},inactiveColor:{type:String},onChange:e(),"onUpdate:active":e(),onBeforeChange:e(),onFabClick:e(),fabProps:{type:Object}},ie=Symbol("BOTTOM_NAVIGATION_BIND_BOTTOM_NAVIGATION_ITEM_KEY");function se(){return se=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},se.apply(this,arguments)}var{n:re,classes:ce}=a("bottom-navigation"),{n:ve}=a("bottom-navigation-item"),ue=ve("--right-half-space"),de=ve("--left-half-space"),me=ve("--right-space"),pe={type:"primary"};var fe=d({name:"VarBottomNavigation",components:{VarButton:r},props:le,setup(e,a){var{slots:l}=a,i=m(null),s=p((()=>e.active)),r=p((()=>e.activeColor)),c=p((()=>e.inactiveColor)),v=m({}),{length:u,bottomNavigationItems:d,bindBottomNavigationItem:g}=function(){var{childProviders:e,length:a,bindChildren:t}=oe(ie);return{length:a,bottomNavigationItems:e,bindBottomNavigationItem:t}}(),h=()=>d.find((e=>{var{name:a}=e;return s.value===a.value})),y=()=>d.find((e=>{var{index:a}=e;return s.value===a.value})),x=()=>{t(s.value)&&(s.value<0?o(e["onUpdate:active"],0):s.value>u.value-1&&o(e["onUpdate:active"],u.value-1))},k=a=>{var t=n(o(e.onBeforeChange,a));Promise.all(t).then((e=>{e.every(Boolean)&&C(a)}))},C=a=>{o(e["onUpdate:active"],a),o(e.onChange,a)},B=e=>{var a=I(),t=a.length,o=e%2==0;a.forEach(((e,a)=>{T(o,e,a,t)}))},T=(e,a,t,o)=>{if(e||!(t===o-1)){var n=t===o/2;t===o/2-1?a.classList.add(ue):n&&a.classList.add(de)}else a.classList.add(me)},I=()=>Array.from(i.value.querySelectorAll("."+ve()));return g({active:s,activeColor:r,inactiveColor:c,onToggle:a=>{s.value!==a&&(e.onBeforeChange?k(a):C(a))}}),f((()=>u.value),(()=>{0===u.value||h()||y()||x()})),f((()=>e.fabProps),(e=>{v.value=se({},pe,e)}),{immediate:!0,deep:!0}),ne((()=>{l.fab&&B(u.value)})),b((()=>{I().forEach((e=>{e.classList.remove(ue,de,me)})),l.fab&&B(u.value)})),{n:re,classes:ce,length:u,bottomNavigationDom:i,handleFabClick:()=>{o(e.onFabClick)},fabProps:v}}});fe.render=function(e,a){var t=g("var-button");return h(),y("div",{class:I(e.classes(e.n(),e.n("$--box"),[e.fixed,e.n("--fixed")],[e.border,e.n("--border")],[e.safeArea,e.n("--safe-area")])),ref:"bottomNavigationDom",style:N("z-index:"+e.zIndex)},[x(e.$slots,"default"),e.$slots.fab?(h(),k(t,B({key:0,class:e.classes(e.n("fab"),[e.length%2,e.n("--fab-right"),e.n("--fab-center")]),"var-bottom-navigation__fab":"",onClick:e.handleFabClick},e.fabProps,{round:""}),{default:C((()=>[x(e.$slots,"fab")])),_:3},16,["class","onClick"])):T("v-if",!0)],6)};const be=fe;be.install=function(e){e.component(be.name,be)};var ge=be,he={name:{type:String},icon:{type:String},label:{type:String},namespace:{type:String,default:"var-icon"},badge:{type:[Boolean,Object],default:!1},onClick:e()};var{n:ye,classes:xe}=a("bottom-navigation-item"),ke={type:"danger",dot:!0};var Ce=d({name:"VarBottomNavigationItem",components:{VarBadge:c,VarIcon:v},directives:{Ripple:s},props:he,setup(e){var a=p((()=>e.name)),t=p((()=>e.badge)),n=m({}),{index:s,bottomNavigation:r,bindBottomNavigation:c}=function(){var{parentProvider:e,index:a,bindParent:t}=l(ie);return t||i("BottomNavigationItem","<var-bottom-navigation-item/> must in <var-bottom-navigation/>"),{index:a,bottomNavigation:e,bindBottomNavigation:t}}(),{active:v,activeColor:u,inactiveColor:d}=r;return c({name:a,index:s}),f((()=>t.value),(e=>{n.value=!0===e?ke:t.value}),{immediate:!0}),{n:ye,classes:xe,index:s,active:v,badge:t,badgeProps:n,computeColorStyle:()=>v.value===a.value||v.value===s.value?u.value:d.value,handleClick:()=>{var t,n=null!=(t=a.value)?t:s.value;o(e.onClick,n),o(r.onToggle,n)}}}});Ce.render=function(e,a){var t=g("var-icon"),o=g("var-badge"),n=j("ripple");return _((h(),y("button",{class:I(e.classes(e.n(),e.n("$--box"),[e.active===e.index||e.active===e.name,e.n("--active")])),style:N({color:e.computeColorStyle()}),onClick:a[0]||(a[0]=function(){return e.handleClick&&e.handleClick(...arguments)})},[e.icon&&!e.$slots.icon?(h(),k(t,{key:0,name:e.icon,namespace:e.namespace,class:I(e.n("icon")),"var-bottom-navigation-item-cover":""},null,8,["name","namespace","class"])):T("v-if",!0),x(e.$slots,"icon",{active:e.active===e.index||e.active===e.name}),e.badge?(h(),k(o,B({key:1},e.badgeProps,{class:e.n("badge"),"var-bottom-navigation-item-cover":""}),null,16,["class"])):T("v-if",!0),A("span",{class:I(e.n("label"))},[e.$slots.default?T("v-if",!0):(h(),y(O,{key:0},[S(w(e.label),1)],2112)),x(e.$slots,"default")],2)],6)),[[n]])};const Be=Ce;Be.install=function(e){e.component(Be.name,Be)};var Te=Be;function Ie(e,a){const t=((e,a)=>{const t=m(),o=()=>{t.value=K(e).height};return $((()=>{if(P(o),a)for(let e=1;e<=3;e++)setTimeout(o,100*e)})),Z((()=>P(o))),f([G,H],o),t})(e,!0);return e=>R("div",{class:a("placeholder"),style:{height:t.value?`${t.value}px`:void 0}},[e()])}const[Ne,je]=Y("nav-bar");const _e=X(d({name:Ne,props:{title:String,fixed:Boolean,zIndex:Q,border:J,leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:J},emits:["clickLeft","clickRight"],setup(e,{emit:a,slots:t}){const o=m(),n=Ie(o,je),l=e=>a("clickLeft",e),i=e=>a("clickRight",e),s=()=>{const{title:a,fixed:n,border:s,zIndex:r}=e,c=W(r),v=e.leftArrow||e.leftText||t.left,u=e.rightText||t.right;return R("div",{ref:o,style:c,class:[je({fixed:n}),{[te]:s,"van-safe-area-top":e.safeAreaInsetTop}]},[R("div",{class:je("content")},[v&&R("div",{class:[je("left"),e.clickable?ae:""],onClick:l},[t.left?t.left():[e.leftArrow&&R(ee,{class:je("arrow"),name:"arrow-left"},null),e.leftText&&R("span",{class:je("text")},[e.leftText])]]),R("div",{class:[je("title"),"van-ellipsis"]},[t.title?t.title():a]),u&&R("div",{class:[je("right"),e.clickable?ae:""],onClick:i},[t.right?t.right():R("span",{class:je("text")},[e.rightText])])])])};return()=>e.fixed&&e.placeholder?n(s):s()}})),Ae={class:"text-white"},Oe=V({__name:"index",setup(e){const a=z(),{TODO:t,SEARCH:o,REPORT:n,MY:l,QRCODE:i}=q,s=[{key:"todo",label:t,icon:"minus-box"},{key:"search",label:o,icon:"minus-box"},{key:"report",label:n,icon:"minus-box"},{key:"my",label:l,icon:"minus-box"}],r=E(),c=m(0),v=m(!0),d=m(!0),b=p((()=>a.getNavTitle));f((()=>r),(()=>{const e=s.some((e=>e.key===r.currentRoute.value.path.replace("/","")));c.value=s.findIndex((e=>e.key===r.currentRoute.value.path.replace("/",""))),v.value=e,d.value=e}),{deep:!0,immediate:!0});const x=()=>{a.setNavTitle(i),r.push("/qrcode")},B=()=>{r.go(-1)};return(e,o)=>{const n=ee,i=_e,d=g("RouterView"),m=Te,p=u,f=ge;return h(),y(O,null,[_(R(i,{title:D(b),"left-arrow":!v.value,onClickLeft:B,class:"navBar"},{title:C((()=>[A("p",Ae,w(D(b)),1)])),left:C((()=>[_(R(n,{name:"arrow-left",class:"text-white"},null,512),[[L,!v.value]])])),_:1},8,["title","left-arrow"]),[[L,D(b)!==D(l)&&D(b)!==D(t)]]),A("div",{class:I(["main-page bg-gray-50",{tabbar:v.value}])},[e.$route.meta.keepAlive?(h(),k(d,{key:0},{default:C((({Component:a})=>[(h(),k(F,null,[(h(),k(M(a),{key:e.$route.path}))],1024))])),_:1})):T("",!0),e.$route.meta.keepAlive?T("",!0):(h(),k(d,{key:e.$route.path}))],2),_(R(f,{"z-index":"888","safe-area":!0,fixed:"",active:c.value,"onUpdate:active":o[0]||(o[0]=e=>c.value=e)},{fab:C((()=>[R(p,{name:"barcode-scan",onClick:x})])),default:C((()=>[(h(),y(O,null,U(s,((e,t)=>R(m,{key:e.key,icon:e.icon,label:e.label,onClick:o=>(({key:e,label:t},o)=>{r.push(e),c.value=o,a.setNavTitle(t)})(e,t)},null,8,["icon","label","onClick"]))),64))])),_:1},8,["active"]),[[L,v.value]])],64)}}},[["__scopeId","data-v-142b86cf"]]);export{Oe as default};
