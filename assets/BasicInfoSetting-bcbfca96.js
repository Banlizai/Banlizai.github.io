import{V as e,a8 as l,ap as a,u as o,s,a5 as t,Y as n,Z as i,a4 as u,ad as c,ae as p}from"./@arco-design-8dabd30f.js";import{u as d}from"./dict-9c237ae6.js";import{d as r,v as m,u as f,i as y,r as v,o as k,c as h,f as b,s as T,w,a1 as V,m as j,q as P,F as D,R as _,C,D as g,n as H}from"./@vue-2b41ce19.js";import"./b-tween-5055d79e.js";import"./b-validate-457088db.js";import"./resize-observer-polyfill-ad543aa3.js";import"./scroll-into-view-if-needed-59a60a09.js";import"./compute-scroll-into-view-2962e95c.js";import"./number-precision-d9b928a1.js";import"./dayjs-094145ee.js";import"./@logicflow-85f8458e.js";import"./ids-ef071351.js";import"./lodash-es-1e3e3aa2.js";import"./preact-5fc9b0bf.js";import"./pinia-b3c1485e.js";const U={class:"flex justify-between"},x={class:"w-1/2"},Y={class:"w-1/2"},$={class:"h-full pl-28 min-h-[180px]"},M={class:"flex flex-wrap justify-start"},q={class:"w-full h-[180px]"},I=r({__name:"BasicInfoSetting",props:{form:{type:Object,required:!0}},setup(r){const I=r,{inspectionCycleOptions:O}=d();m((()=>I.form.id),(e=>{var l;const{inspectPlanType:a,inspectTypeHour:o,inspectTypeMinute:s,inspectTypeDate:t,inspectCustomDate:n}=I.form;switch(a){case 1:break;case 2:z.value=`${o}:${s}:00`;break;case 3:z.value=`${o}:${s}:00`;const e=S.map((e=>e.key));for(let l=0;l<e.length;l++){const a=S.find((a=>a.key===e[l]));a&&"on"===I.form[e[l]]&&(a.value=!0)}break;case 4:z.value=`${o}:${s}:00`;const a=null==(l=null==t?void 0:t.split(","))?void 0:l.map((e=>"L"===e?32:Number(e)));E.forEach((e=>{(null==a?void 0:a.includes(e.key))&&(e.value=!0)}));case 5:z.value=`${o}:${s}:00`,B.value=null==n?void 0:n.split(",")}}));const z=f(""),L=y("userOptions"),N=O,R=[{label:"域1",value:1}],S=v([{label:"周一",key:"inspectTypeMonday",value:!1},{label:"周二",key:"inspectTypeTuesday",value:!1},{label:"周三",key:"inspectTypeWednesday",value:!1},{label:"周四",key:"inspectTypeThursday",value:!1},{label:"周五",key:"inspectTypeFriday",value:!1},{label:"周六",key:"inspectTypeSaturday",value:!1},{label:"周日",key:"inspectTypeSunday",value:!1}]),B=f([]),E=v(Array.from({length:32},((e,l)=>({key:l+1,value:!1}))));function F(e){if("string"==typeof e){const[l,a,o]=e.split(":");I.form.inspectTypeHour=l,I.form.inspectTypeMinute=a}}function A(){const e=E.filter((e=>e.value));I.form.inspectTypeDate=0===e.length?void 0:e.map((e=>32===e.key?"L":e.key)).join(",")}function W(e,l,a){if(B.value||(B.value=[]),B.value.includes(a)){const e=B.value.indexOf(a);if(-1!==e){const l=document.getElementById(`customize-${e}`);l&&(l.classList.add("opacity-50"),setTimeout((()=>{l.classList.remove("opacity-50")}),500))}}else B.value.push(a),I.form.inspectCustomDate=B.value.join(",")}return(d,m)=>{const f=e,y=l,v=a,O=o,Z=s,G=t,J=n,K=i,Q=u,X=c,ee=p;return k(),h("div",U,[b("div",x,[T(y,{field:"insepctPalnTaskName",label:"计划名称",required:!0},{default:w((()=>[T(f,{modelValue:I.form.insepctPalnTaskName,"onUpdate:modelValue":m[0]||(m[0]=e=>I.form.insepctPalnTaskName=e),placeholder:"请输入巡检计划名称"},null,8,["modelValue"])])),_:1}),T(y,{field:"inspectPlanDescrible",label:"描述"},{default:w((()=>[T(v,{modelValue:r.form.inspectPlanDescrible,"onUpdate:modelValue":m[1]||(m[1]=e=>r.form.inspectPlanDescrible=e),placeholder:"请输入描述","auto-size":{minRows:2,maxRows:8},"show-word-limit":"","allow-clear":""},null,8,["modelValue"])])),_:1}),T(y,{field:"inspectPlanInspector",label:"巡检人",required:!0},{default:w((()=>[T(O,{modelValue:I.form.inspectPlanInspector,"onUpdate:modelValue":m[2]||(m[2]=e=>I.form.inspectPlanInspector=e),options:V(L),placeholder:"请选择巡检人"},null,8,["modelValue","options"])])),_:1}),T(y,{field:"inspectPlanDomain",label:"域"},{default:w((()=>[T(O,{modelValue:I.form.inspectPlanDomain,"onUpdate:modelValue":m[3]||(m[3]=e=>I.form.inspectPlanDomain=e),options:R,placeholder:"请选择域"},null,8,["modelValue"])])),_:1})]),b("div",Y,[T(y,{field:"inspectPlanType",label:"巡检周期",required:!0},{default:w((()=>[T(O,{modelValue:I.form.inspectPlanType,"onUpdate:modelValue":m[4]||(m[4]=e=>I.form.inspectPlanType=e),options:V(N),placeholder:"请选择巡检周期"},null,8,["modelValue","options"])])),_:1}),T(Z),b("div",$,[2===I.form.inspectPlanType?(k(),j(G,{key:0,modelValue:z.value,"onUpdate:modelValue":m[5]||(m[5]=e=>z.value=e),class:"w-full",format:"HH:mm",onChange:F},null,8,["modelValue"])):P("",!0),3===I.form.inspectPlanType?(k(),j(K,{key:1,direction:"vertical"},{default:w((()=>[T(K,null,{default:w((()=>[(k(!0),h(D,null,_(S,(e=>(k(),j(J,{checked:e.value,"onUpdate:checked":l=>e.value=l,key:e.key,checkable:"",color:"arcoblue","default-checked":!0,onCheck:l=>{return a=l,o=e.key,void(I.form[o]=a?"on":void 0);var a,o}},{default:w((()=>[C(g(e.label),1)])),_:2},1032,["checked","onUpdate:checked","onCheck"])))),128))])),_:1}),T(G,{modelValue:z.value,"onUpdate:modelValue":m[6]||(m[6]=e=>z.value=e),class:"w-full",format:"HH:mm",onChange:F},null,8,["modelValue"])])),_:1})):P("",!0),4===I.form.inspectPlanType?(k(),j(K,{key:2,direction:"vertical"},{default:w((()=>[b("div",M,[(k(!0),h(D,null,_(E,(e=>(k(),h("div",{class:"w-1/7 p-1",key:e.key},[T(J,{class:H(["flex justify-center",[32===e.key?"w-16":"w-8"]]),checked:e.value,"onUpdate:checked":l=>e.value=l,checkable:"",color:"arcoblue","default-checked":!0,onCheck:A},{default:w((()=>[32===e.key?(k(),h(D,{key:0},[C(" 最后一天 ")],64)):(k(),h(D,{key:1},[C(g(e.key),1)],64))])),_:2},1032,["class","checked","onUpdate:checked"])])))),128))]),T(G,{modelValue:z.value,"onUpdate:modelValue":m[7]||(m[7]=e=>z.value=e),class:"w-full",format:"HH:mm",onChange:F},null,8,["modelValue"])])),_:1})):P("",!0),5===I.form.inspectPlanType?(k(),j(K,{key:3,direction:"vertical",fill:""},{default:w((()=>[T(Q,{class:"w-full","unmount-on-close":"","show-time":"",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm",onOk:W}),b("div",q,[T(ee,{gutter:[12,12]},{default:w((()=>[(k(!0),h(D,null,_(B.value,((e,l)=>(k(),j(X,{span:10,key:e},{default:w((()=>[T(J,{class:"w-full transition-all",id:"customize-"+l,closable:"",onClose:l=>function(e){B.value=B.value.filter((l=>l!==e)),I.form.inspectCustomDate=B.value.join(",")}(e)},{default:w((()=>[C(g(e),1)])),_:2},1032,["id","onClose"])])),_:2},1024)))),128))])),_:1})])])),_:1})):P("",!0)])])])}}});export{I as default};
