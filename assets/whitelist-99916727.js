import{d as e,h as t,g as o,n as s,o as a,u as i,p as n,a as r,b as l,e as c,j as p,k as m,q as d,m as u,M as f}from"./index-4d88e5a9.js";import{M as j,c as h,f as b}from"./@arco-design-306c64c5.js";import{p as g}from"./http-5a7406c8.js";import{u as y,a as v,b as w,c as k,d as C}from"./table-76ae527c.js";import{u as _,w as S,d as x,e as O,b as A}from"./modal-aad43339.js";import{e as D,r as L,a as z,o as K,j as R,k as q,p as T,n as U,v as $,m as F,y as I,a1 as M,F as N}from"./@vue-ab7141bd.js";import"./path-browserify-8c7c24dd.js";import"./vue-router-74931cc0.js";import"./pinia-c1bb2998.js";import"./@vueuse-96027ebb.js";import"./axios-7fb8d0b2.js";import"./@logicflow-435513e4.js";import"./ids-ef071351.js";import"./preact-173f4f0b.js";import"./qs-536c1183.js";import"./side-channel-52a2f2e5.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./call-bind-d34af9d2.js";import"./object-inspect-a85657d3.js";import"./mockjs-a6500710.js";import"./tiny-emitter-af47831f.js";import"./xgplayer-474fd437.js";import"./quill-daa56216.js";import"./sortablejs-2f5483e3.js";import"./lodash-es-6e445b1b.js";import"./resize-observer-polyfill-ad543aa3.js";import"./compute-scroll-into-view-2962e95c.js";import"./b-tween-5055d79e.js";import"./dayjs-f47c42f6.js";import"./b-validate-42052d35.js";import"./number-precision-d9b928a1.js";import"./scroll-into-view-if-needed-59a60a09.js";const P={class:"main-container"},B={class:"flex justify-between"},E=D({__name:"whitelist",setup(s){const{ADD:D,UPDATE:E,UPLOAD:H,INFO:J}=f,G=_(),Q=L(null),V=y(re),{selectedRowKeys:W,onSelectionChange:X,showCheckedAll:Y}=v(),Z=w(),{bordered:ee,striped:te,handleSuccess:oe,tableLoading:se,dataList:ae}=Z,ie=C("id"),ne=z(k(x));async function re(){se.value=!0;const e=await g({url:o,data:()=>({page:V.page,pageSize:V.pageSize})});se.value=!1,oe(z(e)),V.setTotalSize(e.totalSize||10)}function le(){}function ce(){S.forEach((e=>{e.reset?e.reset():e.value.value=""}))}function pe(e){e||0!==W.value.length?h.confirm({title:"提示",content:`确定要${e?"删除此":"删除所选择的"}数据吗？`,cancelText:"取消",okText:"删除",onOk:()=>{j.success("删除成功")}}):j.error("请选择要删除的数据")}function me(){var e;const t=G.useModalParams(G.itemOption);null==(e=Q.value)||e.close(),j.success(`模拟${G.title}菜单成功，参数为: ${JSON.stringify(t)}`)}function de({record:e,key:t}){switch(t){case"nickName":return async function(e,t){var o;G.title=J,G.itemOption=[],null==(o=Q.value)||o.show();const s={title:e[t]};G.params={record:e,key:t};try{const{data:o}=await g({url:a,data:s});je.list=o.list,je.title=e[t],G.loading=!1}catch{G.loading=!1}}(e,t);case"gender":return async function(e,t){const o={title:e[t]};try{const{msg:e}=await g({url:i,data:o});j.success(e||`${E}成功`)}catch{G.loading=!1,e[t]=!1}}(e,t)}}function ue(){var e;G.title=D,G.itemOption=[...O],null==(e=Q.value)||e.show()}function fe(){var e;G.title=E,G.itemOption=[...O],null==(e=Q.value)||e.show()}const je=z({list:[],title:""});function he(){var e;G.title=H,G.itemOption=[...A],null==(e=Q.value)||e.show()}function be(){}return K(re),(o,s)=>{const a=n,i=b,f=r,j=l,h=c,g=R("icon-edit"),y=R("icon-delete"),v=p,w=m,k=d,C=u;return q(),T(N,null,[U("div",P,[$(w,{ref:"tableBody"},{header:F((()=>[$(h,{"show-filter":!0,title:"",onSearch:le,onResetSearch:ce},{"more-button-content":F((()=>[$(a,{onAdd:ue},{name:F((()=>[I("添加设备")])),_:1}),$(i,{type:"primary",onClick:he},{default:F((()=>[I(" 导入 ")])),_:1}),$(i,{type:"primary",onClick:be},{default:F((()=>[I(" 导出 ")])),_:1}),$(f,{onDelete:pe})])),"search-content":F((()=>[$(j,{formItems:M(S)},null,8,["formItems"])])),"table-config":F((()=>[$(e,{tableColumns:ne,"onUpdate:border":s[0]||(s[0]=e=>M(Z).bordered.value=e),"onUpdate:striped":s[1]||(s[1]=e=>M(Z).striped.value=e),onDoRefresh:re},null,8,["tableColumns"])])),_:1})])),default:F((()=>[$(t,{bordered:M(ee),striped:M(te),selectedRowKeys:M(W),showCheckedAll:M(Y),tableLoading:M(se),dataList:M(ae),tableColumns:ne,rowKey:M(ie),onSelectionChange:M(X),onRowKeyChange:de},{optional:F((({record:e})=>[U("div",B,[$(i,{type:"text",onClick:fe},{icon:F((()=>[$(g)])),_:1}),$(i,{type:"text",onClick:t=>pe(e)},{icon:F((()=>[$(y)])),_:2},1032,["onClick"])])])),_:1},8,["bordered","striped","selectedRowKeys","showCheckedAll","tableLoading","dataList","tableColumns","rowKey","onSelectionChange"])])),footer:F((()=>[$(v,{pagination:M(V)},null,8,["pagination"])])),_:1},512)]),$(C,{ref_key:"modalDialog",ref:Q,config:M(G),onConfirm:me},{content:F((()=>[$(k,{data:je},null,8,["data"])])),_:1},8,["config"])],64)}}});export{E as default};
