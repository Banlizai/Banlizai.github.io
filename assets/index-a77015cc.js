import{B as s,M as e}from"./@arco-design-8dabd30f.js";import{d as a,u as i,r as t,h as r,o,c as n,F as l,R as p,f as m,N as u,bq as c,W as d,a1 as j,s as v,w as f,aX as y,aV as w,C as b}from"./@vue-2b41ce19.js";import{u as h,b as g}from"./vue-router-70e2faff.js";import{H as x,Q as q,P as k,n as _}from"./index-0ca45986.js";import{j as B}from"./user-38648499.js";import{a as C}from"./@vueuse-ca9a384d.js";import"./b-tween-5055d79e.js";import"./b-validate-457088db.js";import"./resize-observer-polyfill-ad543aa3.js";import"./scroll-into-view-if-needed-59a60a09.js";import"./compute-scroll-into-view-2962e95c.js";import"./number-precision-d9b928a1.js";import"./dayjs-094145ee.js";import"./@logicflow-85f8458e.js";import"./ids-ef071351.js";import"./lodash-es-1e3e3aa2.js";import"./preact-5fc9b0bf.js";import"./pinia-b3c1485e.js";import"./axios-6371c10e.js";import"./qs-f981fe00.js";import"./side-channel-01aeb4d9.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./call-bind-fae29077.js";import"./object-inspect-0eda087e.js";import"./path-browserify-8c7c24dd.js";import"./tiny-emitter-35dc7566.js";import"./echarts-24943dbb.js";import"./zrender-2d3b2bba.js";import"./tslib-a4e99503.js";import"./xgplayer-700bd6a3.js";import"./delegate-ef66b241.js";import"./downloadjs-91c0ea73.js";import"./quill-ecb3881d.js";import"./sortablejs-2f5483e3.js";const K=s=>(y("data-v-08b20a2c"),s=s(),w(),s),U={class:"signin"},V={class:"content"},z=K((()=>m("h2",null,"SIM 登录",-1))),F={class:"form h-full"},H={class:"inputBx"},I=K((()=>m("i",null,"用户名",-1))),M={class:"inputBx"},A=K((()=>m("i",null,"密码",-1))),D={class:"h-full item-wrapper mt-4 flex justify-between"},E={class:"w-2/3 h-full inputBx"},J=K((()=>m("i",null,"验证码",-1))),N={class:"w-1/3 h-full flex items-center justify-end"},P=["src"],Q=_(a({__name:"index",setup(a){i(!0);const y=i(!1),w=h(),_=g(),K=x(),Q=t({username:"admin",password:"admin123",code:"",uuid:""}),R=i(""),S=C((async()=>{y.value=!0;try{const{data:s}=await k(Q),{user:a,permissions:i,roles:t}=await B(s.access_token),r={token:s.access_token,...a,permissions:i,roles:t};await K.saveUser(r),K.changeAvatar(a.avatar),await w.replace({path:_.query.redirect?_.query.redirect:"/"}),e.success("登录成功，欢迎："+Q.username)}catch(s){e.error(s.message)}finally{y.value=!1,W()}}),500),W=C((()=>{X()}),300),X=async()=>{const{img:s,uuid:e}=await q();Q.uuid=e,R.value=`data:image/png;base64,${s}`};return r((()=>{X()})),(e,a)=>{const i=s;return o(),n("section",null,[(o(),n(l,null,p(273,(s=>m("span",{key:s}))),64)),m("div",U,[m("div",V,[z,m("div",F,[m("div",H,[u(m("input",{type:"text",required:"","onUpdate:modelValue":a[0]||(a[0]=s=>Q.username=s),onKeyup:a[1]||(a[1]=d(((...s)=>j(S)&&j(S)(...s)),["enter"]))},null,544),[[c,Q.username]]),I]),m("div",M,[u(m("input",{type:"password",required:"","onUpdate:modelValue":a[2]||(a[2]=s=>Q.password=s),onKeyup:a[3]||(a[3]=d(((...s)=>j(S)&&j(S)(...s)),["enter"]))},null,544),[[c,Q.password]]),A]),m("div",D,[m("div",E,[u(m("input",{"onUpdate:modelValue":a[4]||(a[4]=s=>Q.code=s),onKeyup:a[5]||(a[5]=d(((...s)=>j(S)&&j(S)(...s)),["enter"]))},null,544),[[c,Q.code]]),J]),m("div",N,[m("img",{class:"w-4/5 h-12 rounded-sm",src:R.value,alt:"验证码",onClick:a[6]||(a[6]=(...s)=>j(W)&&j(W)(...s))},null,8,P)])]),v(i,{size:"large",type:"primary",value:"登录",onClick:j(S),onKeyup:d(j(S),["enter"])},{default:f((()=>[b(" 登录 ")])),_:1},8,["onClick","onKeyup"])])])])])}}}),[["__scopeId","data-v-08b20a2c"]]);export{Q as default};
