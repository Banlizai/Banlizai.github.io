import{u as s,a as e,b as t,e as o,a3 as a,w as r,f as i,h as n,i as l,j as c,k as d,l as p,m,M as u}from"./index-0ca45986.js";import{M as j,n as h,B as f,Y as y}from"./@arco-design-8dabd30f.js";import{a as g,b,u as v,c as w,d as C,e as k}from"./columns-1685844f.js";import{b as S,c as _,d as x,e as A,f as D}from"./post-ad3b8162.js";import{d as R,u as L,h as O,a_ as z,o as B,c as K,f as E,s as I,w as T,N as U,m as V,a1 as q,C as F,Y as M,D as N,F as P,r as Y}from"./@vue-2b41ce19.js";import{a as H}from"./@vueuse-ca9a384d.js";import"./pinia-b3c1485e.js";import"./axios-6371c10e.js";import"./@logicflow-85f8458e.js";import"./ids-ef071351.js";import"./lodash-es-1e3e3aa2.js";import"./preact-5fc9b0bf.js";import"./qs-f981fe00.js";import"./side-channel-01aeb4d9.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./call-bind-fae29077.js";import"./object-inspect-0eda087e.js";import"./dayjs-094145ee.js";import"./path-browserify-8c7c24dd.js";import"./vue-router-70e2faff.js";import"./tiny-emitter-35dc7566.js";import"./echarts-24943dbb.js";import"./zrender-2d3b2bba.js";import"./tslib-a4e99503.js";import"./xgplayer-700bd6a3.js";import"./delegate-ef66b241.js";import"./downloadjs-91c0ea73.js";import"./quill-ecb3881d.js";import"./sortablejs-2f5483e3.js";import"./b-tween-5055d79e.js";import"./b-validate-457088db.js";import"./resize-observer-polyfill-ad543aa3.js";import"./scroll-into-view-if-needed-59a60a09.js";import"./compute-scroll-into-view-2962e95c.js";import"./number-precision-d9b928a1.js";import"./dict-9c237ae6.js";const J={class:"main-container"},$=R({__name:"post",setup(R){const{ADD:$,UPDATE:G}=u,Q=s(),W=L(null),X=g(us),Z=b(),{selectedRowKeys:ss,onSelectionChange:es,showCheckedAll:ts}=v(),{bordered:os,striped:as,handleSuccess:rs,tableLoading:is,dataList:ns}=Z,ls=k("postId"),{post:cs}=w(),ds=cs,{onSorterChange:ps,sortOrder:ms}=C(us);async function us(){is.value=!0;try{const{code:s,rows:e,msg:o,total:a}=await S({pageNum:X.page,pageSize:X.pageSize,orderByColumn:ms.orderBy,isAsc:ms.isAsc,...t(ds)}),r={code:s,msg:o,data:e};is.value=!1,rs(Y(r)),X.setTotalSize(a||10)}catch(s){}}function js(){us()}function hs(){ds.forEach((s=>{s.searchReset?s.searchReset():s.searchValue=void 0})),js()}const fs=s=>{const e=s.postId||ss.value.toString();e?h.confirm({title:"提示",content:`确定要${s?"删除此":"删除所选择的"}数据吗？`,cancelText:"取消",okText:"删除",onOk:async()=>{try{const{msg:s}=await _(e);j.success(s),us()}catch(s){}}}):j.error("请选择要删除的数据")},ys=async()=>{try{o(a,t(ds),"岗位管理")}catch(s){}};function gs(){var s;Q.title=$,Q.itemOption=ds,null==(s=W.value)||s.show()}const bs=async()=>{var s;try{const e=Q.itemOption.find((s=>"postId"===s.key)),t=r(Q.itemOption),{msg:o}=(null==e?void 0:e.value)?await x(t):await A(t);j.success(o),null==(s=W.value)||s.close(),us()}catch(e){}},vs=H((async({record:s})=>{try{const{data:e}=await D(s.postId);ds.forEach((s=>{s.value=e[s.key]}))}catch(e){}}),300);return O(us),(s,t)=>{const o=f,a=i,r=n,u=l,j=y,h=c,g=d,b=p,v=m,w=z("hasPerm");return B(),K(P,null,[E("div",J,[I(b,{ref:"tableBody"},{header:T((()=>[I(u,{"show-filter":!0,title:"",onSearch:js,onResetSearch:hs},{"more-button-content":T((()=>[U((B(),V(o,{type:"primary",loading:q(e),onClick:ys},{default:T((()=>[F(" 导出岗位 ")])),_:1},8,["loading"])),[[w,["system:post:export"]]]),U((B(),V(o,{type:"primary",onClick:gs},{default:T((()=>[F(" 添加 ")])),_:1})),[[w,["system:post:add"]]]),U((B(),V(o,{status:"danger",onClick:fs},{default:T((()=>[F("删除")])),_:1})),[[w,["system:post:remove"]]])])),"search-content":T((()=>[I(a,{modelValue:q(ds),"onUpdate:modelValue":t[0]||(t[0]=s=>M(ds)?ds.value=s:null)},null,8,["modelValue"])])),"table-config":T((()=>[I(r,{tableColumns:q(ds),"onUpdate:border":t[1]||(t[1]=s=>q(Z).bordered.value=s),"onUpdate:striped":t[2]||(t[2]=s=>q(Z).striped.value=s),onDoRefresh:us},null,8,["tableColumns"])])),_:1})])),default:T((()=>[I(h,{bordered:q(os),striped:q(as),tableLoading:q(is),dataList:q(ns),tableColumns:q(ds),rowKey:q(ls),onSorterChange:q(ps),onSelectionChange:q(es),selectedRowKeys:q(ss),showCheckedAll:q(ts)},{optional:T((({record:s})=>[U((B(),V(o,{type:"primary",onClick:e=>(async s=>{var e;Q.title=G,Q.itemOption=ds,null==(e=W.value)||e.show(),await vs({record:s})})(s)},{default:T((()=>[F("编辑")])),_:2},1032,["onClick"])),[[w,["system:post:edit"]]]),U((B(),V(o,{status:"danger",onClick:e=>fs(s)},{default:T((()=>[F("删除")])),_:2},1032,["onClick"])),[[w,["system:post:remove"]]])])),status:T((({record:s})=>[I(j,{color:"0"===s.status?"green":"red"},{default:T((()=>[F(N("0"===s.status?"正常":"停用"),1)])),_:2},1032,["color"])])),_:1},8,["bordered","striped","tableLoading","dataList","tableColumns","rowKey","onSorterChange","onSelectionChange","selectedRowKeys","showCheckedAll"])])),footer:T((()=>[I(g,{pagination:q(X)},null,8,["pagination"])])),_:1},512)]),I(v,{ref_key:"modalDialog",ref:W,config:q(Q),onConfirm:bs},null,8,["config"])],64)}}});export{$ as default};
