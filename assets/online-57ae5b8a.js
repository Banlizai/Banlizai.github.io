import{g as s,G as e,b as o,f as t,h as a,i as r,j as i,k as n,l}from"./index-0ca45986.js";import{n as m,M as p,B as d}from"./@arco-design-8dabd30f.js";import{d as c,a as j,b as u,c as b,e as g}from"./columns-1685844f.js";import{d as h}from"./dayjs-094145ee.js";import{d as f,h as y,a_ as w,o as v,c as C,s as S,w as k,a1 as x,Y as _,N as L,m as z,C as B,D,r as T}from"./@vue-2b41ce19.js";import"./pinia-b3c1485e.js";import"./axios-6371c10e.js";import"./@logicflow-85f8458e.js";import"./ids-ef071351.js";import"./lodash-es-1e3e3aa2.js";import"./preact-5fc9b0bf.js";import"./qs-f981fe00.js";import"./side-channel-01aeb4d9.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./call-bind-fae29077.js";import"./object-inspect-0eda087e.js";import"./path-browserify-8c7c24dd.js";import"./vue-router-70e2faff.js";import"./@vueuse-ca9a384d.js";import"./tiny-emitter-35dc7566.js";import"./echarts-24943dbb.js";import"./zrender-2d3b2bba.js";import"./tslib-a4e99503.js";import"./xgplayer-700bd6a3.js";import"./delegate-ef66b241.js";import"./downloadjs-91c0ea73.js";import"./quill-ecb3881d.js";import"./sortablejs-2f5483e3.js";import"./b-tween-5055d79e.js";import"./b-validate-457088db.js";import"./resize-observer-polyfill-ad543aa3.js";import"./scroll-into-view-if-needed-59a60a09.js";import"./compute-scroll-into-view-2962e95c.js";import"./number-precision-d9b928a1.js";import"./dict-9c237ae6.js";const Y={class:"main-container"},R=f({__name:"online",setup(f){const{onSorterChange:R,sortOrder:V}=c($),q=j($),H=u(),{bordered:M,striped:U,handleSuccess:A,tableLoading:E,dataList:I}=H,K=g("tokenId"),{online:N}=b(),O=N;async function $(){E.value=!0;try{const{code:e,rows:t,msg:a,total:r}=await(async e=>await s({url:"/system/online/list",data:e}))({pageNum:q.page,pageSize:q.pageSize,orderByColumn:V.orderBy,isAsc:V.isAsc,...o(O)}),i={code:e,msg:a,data:t};E.value=!1,A(T(i)),q.setTotalSize(r||10)}catch(e){}}function F(){O.forEach((s=>{s.searchReset?s.searchReset():s.searchValue=void 0})),$()}const G=s=>{const o=s.tokenId;m.confirm({title:"提示",content:`确定要${s?"退出此":"所选择的"}用户吗？`,simple:!0,cancelText:"取消",okText:"退出",onOk:async()=>{try{const{msg:s}=await(async s=>await e({url:`/system/online/${s}`}))(o);p.success(s),$()}catch(s){}}})};return y($),(s,e)=>{const o=t,m=a,p=r,c=d,j=i,u=n,b=l,g=w("hasPerm");return v(),C("div",Y,[S(b,{ref:"tableBody"},{header:k((()=>[S(p,{"show-filter":!0,title:"",onSearch:$,onResetSearch:F},{"search-content":k((()=>[S(o,{modelValue:x(O),"onUpdate:modelValue":e[0]||(e[0]=s=>_(O)?O.value=s:null)},null,8,["modelValue"])])),"table-config":k((()=>[S(m,{tableColumns:x(O),"onUpdate:border":e[1]||(e[1]=s=>x(H).bordered.value=s),"onUpdate:striped":e[2]||(e[2]=s=>x(H).striped.value=s),onDoRefresh:$},null,8,["tableColumns"])])),_:1})])),default:k((()=>[S(j,{bordered:x(M),striped:x(U),tableLoading:x(E),dataList:x(I),tableColumns:x(O),rowKey:x(K),onSorterChange:x(R)},{optional:k((({record:s})=>[L((v(),z(c,{status:"warning",onClick:e=>G(s)},{default:k((()=>[B("退出账号")])),_:2},1032,["onClick"])),[[g,["monitor:online:logout"]]])])),loginTime:k((({record:s})=>[B(D(x(h)(s.loginTime).format("YYYY-MM-DD HH:mm:ss")),1)])),_:1},8,["bordered","striped","tableLoading","dataList","tableColumns","rowKey","onSorterChange"])])),footer:k((()=>[S(u,{pagination:x(q)},null,8,["pagination"])])),_:1},512)])}}});export{R as default};
