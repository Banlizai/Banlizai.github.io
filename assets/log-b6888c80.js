import{A as e,b as s,f as a,h as t,i as o,j as i,k as r,l as n}from"./index-0ca45986.js";import{M as l,n as d,T as c,c as m,B as p}from"./@arco-design-8dabd30f.js";import{u,a as j,b as h,c as b,d as g,e as y}from"./columns-1685844f.js";import{d as f}from"./dayjs-094145ee.js";import{d as v,u as w,b as C,h as k,a_ as R,o as S,c as A,s as T,w as D,N as Y,m as _,C as x,q as H,a1 as K,D as L,r as z}from"./@vue-2b41ce19.js";import"./pinia-b3c1485e.js";import"./axios-6371c10e.js";import"./@logicflow-85f8458e.js";import"./ids-ef071351.js";import"./lodash-es-1e3e3aa2.js";import"./preact-5fc9b0bf.js";import"./qs-f981fe00.js";import"./side-channel-01aeb4d9.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./call-bind-fae29077.js";import"./object-inspect-0eda087e.js";import"./path-browserify-8c7c24dd.js";import"./vue-router-70e2faff.js";import"./@vueuse-ca9a384d.js";import"./tiny-emitter-35dc7566.js";import"./echarts-24943dbb.js";import"./zrender-2d3b2bba.js";import"./tslib-a4e99503.js";import"./xgplayer-700bd6a3.js";import"./delegate-ef66b241.js";import"./downloadjs-91c0ea73.js";import"./quill-ecb3881d.js";import"./sortablejs-2f5483e3.js";import"./b-tween-5055d79e.js";import"./b-validate-457088db.js";import"./resize-observer-polyfill-ad543aa3.js";import"./scroll-into-view-if-needed-59a60a09.js";import"./compute-scroll-into-view-2962e95c.js";import"./number-precision-d9b928a1.js";import"./dict-9c237ae6.js";const B={class:"main-container"},M=v({__name:"log",setup(v){const M=w("distributionRecords"),{selectedRowKeys:q,onSelectionChange:U,showCheckedAll:V}=u(),E=j(ee),N=h(),{bordered:O,striped:F,handleSuccess:J,tableLoading:P,dataList:G}=N,I=y("id"),{ipAddressDistribution:Q,ipAddressAccess:W}=b(),X=C((()=>"distributionRecords"===M.value?Q:W)),{onSorterChange:Z,sortOrder:$}=g(ee);async function ee(){P.value=!0;const a={pageNum:E.page,pageSize:E.pageSize,orderByColumn:$.orderBy,isAsc:$.isAsc,...s(X.value)};try{const s="distributionRecords"===M.value?await(async s=>await e({url:"/ipmanage/record/list",data:s}))(a):await(async s=>await e({url:"/ipmanage/simChangeHistorye/list",data:s}))(a),{code:t,rows:o,msg:i,total:r}=s,n={code:t,msg:i,data:o};P.value=!1,J(z(n)),E.setTotalSize(r||10)}catch(t){}}function se(){X.value.forEach((e=>{e.searchReset?e.searchReset():e.searchValue=""})),ee()}function ae(){const s=q.value;if(!s.length)return l.error("请选择加入项");d.confirm({title:"提示",content:"是否加入基准表？",cancelText:"取消",okText:"确认",onOk:async()=>{try{const{msg:a}=await(async s=>await e({url:"/ipmanage/simChangeHistorye",data:s}))({ids:s});l.success(a),ee(),q.value=[]}catch(a){}}})}return k(ee),(e,s)=>{const l=c,d=m,u=a,j=p,h=t,b=o,g=i,y=r,v=n,w=R("hasPerm");return S(),A("div",B,[T(v,{ref:"tableBody"},{header:D((()=>[T(b,{"show-filter":!0,title:"",onSearch:ee,onResetSearch:se},{"card-left":D((()=>[T(d,{type:"rounded","active-key":M.value,"onUpdate:activeKey":s[0]||(s[0]=e=>M.value=e),"default-active-key":"distributionRecords","hide-content":"",animation:"",onTabClick:ee},{default:D((()=>[T(l,{key:"distributionRecords",title:"分配记录"}),T(l,{key:"accessChange",title:"准入变更"})])),_:1},8,["active-key"])])),"search-content":D((()=>[T(u,{modelValue:X.value,"onUpdate:modelValue":s[1]||(s[1]=e=>X.value=e)},null,8,["modelValue"])])),"more-button-content":D((()=>["accessChange"===M.value?Y((S(),_(j,{key:0,type:"primary",onClick:ae},{default:D((()=>[x(" 加入基准表 ")])),_:1})),[[w,["ipaddress:log:addaccessChange"]]]):H("",!0)])),"table-config":D((()=>[T(h,{tableColumns:X.value,"onUpdate:border":s[2]||(s[2]=e=>K(N).bordered.value=e),"onUpdate:striped":s[3]||(s[3]=e=>K(N).striped.value=e),onDoRefresh:ee},null,8,["tableColumns"])])),_:1})])),default:D((()=>[T(g,{bordered:K(O),striped:K(F),tableLoading:K(P),dataList:K(G),tableColumns:X.value,rowKey:K(I),onSelectionChange:K(U),onSorterChange:K(Z),selectedRowKeys:K(q),showCheckedAll:K(V)},{createTime:D((({record:e})=>[x(L(K(f)(e.createTime).format("YYYY-MM-DD HH:mm:ss")),1)])),updateTime:D((({record:e})=>[x(L(K(f)(e.updateTime).format("YYYY-MM-DD HH:mm:ss")),1)])),_:1},8,["bordered","striped","tableLoading","dataList","tableColumns","rowKey","onSelectionChange","onSorterChange","selectedRowKeys","showCheckedAll"])])),footer:D((()=>[T(y,{pagination:K(E)},null,8,["pagination"])])),_:1},512)])}}});export{M as default};
