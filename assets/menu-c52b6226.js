import{J as e,_ as a,p as l,e as t,k as o,E as i,m as n}from"./index-4d88e5a9.js";import{M as r,c as s,ab as u,f as d,a9 as c,Z as m,_ as p,T as v,Q as f,y as h,X as y,Y as k}from"./@arco-design-306c64c5.js";import{p as b}from"./http-5a7406c8.js";import{b as j,c as x,d as w}from"./table-76ae527c.js";import{e as g,r as _,o as I,k as U,p as C,v as N,m as V,F as q,R as D,l as O,G as A,y as F,z as M,O as z,u as E,s as J}from"./@vue-ab7141bd.js";import"./path-browserify-8c7c24dd.js";import"./vue-router-74931cc0.js";import"./pinia-c1bb2998.js";import"./@vueuse-96027ebb.js";import"./axios-7fb8d0b2.js";import"./@logicflow-435513e4.js";import"./ids-ef071351.js";import"./preact-173f4f0b.js";import"./qs-536c1183.js";import"./side-channel-52a2f2e5.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./call-bind-d34af9d2.js";import"./object-inspect-a85657d3.js";import"./mockjs-a6500710.js";import"./tiny-emitter-af47831f.js";import"./xgplayer-474fd437.js";import"./quill-daa56216.js";import"./sortablejs-2f5483e3.js";import"./lodash-es-6e445b1b.js";import"./resize-observer-polyfill-ad543aa3.js";import"./compute-scroll-into-view-2962e95c.js";import"./b-tween-5055d79e.js";import"./dayjs-f47c42f6.js";import"./b-validate-42052d35.js";import"./number-precision-d9b928a1.js";import"./scroll-into-view-if-needed-59a60a09.js";const S=g({name:"Menu",setup(){const a=_("add"),l=j(),t=_([]),o=_(null),i=_(),n=w("menuUrl"),u=x([{title:"菜单名称",key:"menuName",dataIndex:"menuName"},{title:"菜单地址",key:"menuUrl",dataIndex:"menuUrl"},{title:"路由name",key:"routeName",dataIndex:"routeName"},{title:"菜单图标",key:"icon",dataIndex:"icon"},{title:"是否缓存",key:"cacheable",dataIndex:"cacheable"},{title:"是否隐藏",key:"hidden",dataIndex:"hidden"},{title:"是否固定标题栏",key:"affix",dataIndex:"affix"},{title:"操作",key:"actions",dataIndex:"actions"}]),d=[{label:"上级菜单",key:"parentPath",value:_(""),placeholder:"请选择上级菜单",type:"tree-select",reset:function(){this.value.value=""}},{label:"菜单名称",key:"menuName",required:!0,type:"input",placeholder:"请输入菜单名称",value:_(""),validator:function(){return!!this.value.value||(r.error(this.placeholder||""),!1)},reset:function(){this.value.value=""}},{label:"菜单地址",key:"menuUrl",required:!0,value:_(""),type:"input",disabled:_(!1),placeholder:"请输入菜单地址",validator:function(){return!!this.value.value||(r.error(this.placeholder||""),!1)},reset:function(){this.value.value=""}},{label:"路由名称",key:"routeName",type:"input",placeholder:"请输入路由名称",value:_(""),reset:function(){this.value.value=""}},{label:"外链地址",key:"redirect",type:"input",placeholder:"请输入外链地址",value:_(""),reset:function(){this.value.value=""}},{label:"菜单图标",key:"icon",type:"icon",value:_(""),reset:function(){this.value.value=""}},{label:"是否缓存",key:"cacheable",type:"switch",value:_(!1),reset:function(){this.value.value=!1}},{label:"是否隐藏",key:"hidden",type:"switch",value:_(!1),reset:function(){this.value.value=!1}},{label:"是否固定",key:"affix",type:"switch",value:_(!1),reset:function(){this.value.value=!1}}];function c(e,a="/"){const l=[];return e.filter((e=>!0!==e.hidden&&e.fullPath!==a)).forEach((e=>{const a={key:e.menuUrl,title:e.menuName};e.children&&e.children.length>0&&(a.children=c(e.children,e.fullPath)),l.push(a)})),l}return I((function(){b({url:e,data:{}}).then(l.handleSuccess).then((e=>{t.value=c(e)})).catch(console.log)})),{rowKey:n,actionModel:a,modalDialog:o,dataForm:i,...l,treeData:t,itemFormOptions:d,tableColumns:u,onAddItem:function(){var e;a.value="add",d.forEach((e=>{e.reset&&e.reset(),"menuUrl"===e.key&&(e.disabled.value=!1)})),null==(e=o.value)||e.show()},onDeleteItem:function(e){s.confirm({title:"提示",content:"是否要删除此数据？",okText:"删除",cancelText:"取消",onOk:()=>{r.success("模拟删除成功，参数为："+JSON.stringify(e))}})},onUpdateItem:function(e){var l;a.value="edit",d.forEach((a=>{a.value.value=e[a.key]||null,"menuUrl"===a.key&&a.disabled&&(a.disabled.value=!0)})),null==(l=o.value)||l.show()},onConfirm:function(){var e,l;"add"===a.value?d.every((e=>!e.validator||e.validator()))&&(null==(e=o.value)||e.close(),r.success("模拟创建菜单成功, 参数为:"+JSON.stringify(d.reduce(((e,a)=>(e[a.key]=a.value.value||"",e)),{})))):d.every((e=>!e.validator||e.validator()))&&(null==(l=o.value)||l.close(),r.success("模拟修改菜单成功, 参数为:"+JSON.stringify(d.reduce(((e,a)=>(e[a.key]=a.value.value||"",e)),{}))))}}}}),P={class:"main-container"};const T=a(S,[["render",function(e,a,r,s,b,j){const x=l,w=t,g=u,_=d,I=c,S=m,T=p,H=o,K=v,L=f,B=i,G=h,Q=y,R=k,X=n;return U(),C("div",P,[N(H,null,{header:V((()=>[N(w,{"show-filter":!1},{"table-config":V((()=>[N(x,{onAdd:e.onAddItem},null,8,["onAdd"])])),_:1})])),default:V((()=>[N(T,{bordered:!1,loading:e.tableLoading,data:e.dataList,"row-key":e.rowKey,pagination:!1},{columns:V((()=>[(U(!0),C(q,null,D(e.tableColumns,(a=>(U(),O(S,{key:a.key,align:a.align,title:a.title,width:a.width,"data-index":a.key,fixed:a.fixed},A({_:2},["index"===a.key?{name:"cell",fn:V((({rowIndex:e})=>[F(M(e+1),1)])),key:"0"}:"routeName"===a.key?{name:"cell",fn:V((({record:e})=>[F(M(e.routeName??"系统默认  "),1)])),key:"1"}:"icon"===a.key?{name:"cell",fn:V((({record:e})=>[(U(),O(z(e.icon||"IconMenu"),{style:{"font-size":"18px"}}))])),key:"2"}:"cacheable"===a.key?{name:"cell",fn:V((({record:e})=>[N(g,{color:e.cacheable?"blue":"red"},{default:V((()=>[F(M(e.cacheable?"是":"否"),1)])),_:2},1032,["color"])])),key:"3"}:"hidden"===a.key?{name:"cell",fn:V((({record:e})=>[N(g,{color:e.hidden?"blue":"red"},{default:V((()=>[F(M(e.hidden?"是":"否"),1)])),_:2},1032,["color"])])),key:"4"}:"affix"===a.key?{name:"cell",fn:V((({record:e})=>[N(g,{color:e.affix?"blue":"red"},{default:V((()=>[F(M(e.affix?"是":"否"),1)])),_:2},1032,["color"])])),key:"5"}:"actions"===a.key?{name:"cell",fn:V((({record:a})=>[N(I,null,{default:V((()=>[N(_,{status:"success",onClick:l=>e.onUpdateItem(a)},{default:V((()=>[F(" 编辑 ")])),_:2},1032,["onClick"]),N(_,{status:"danger",onClick:l=>e.onDeleteItem(a)},{default:V((()=>[F("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),key:"6"}:void 0]),1032,["align","title","width","data-index","fixed"])))),128))])),_:1},8,["loading","data","row-key"])])),_:1}),N(X,{ref:"modalDialog",title:"add"===e.actionModel?"添加菜单":"编辑菜单",onConfirm:e.onConfirm,"content-height":"50vh"},{content:V((()=>[N(R,{model:{},wrapperCol:{span:18}},{default:V((()=>[(U(!0),C(q,null,D(e.itemFormOptions,(a=>(U(),O(Q,{class:E([a.required?"form-item__require":"form-item__no_require"]),label:a.label,key:a.key},{default:V((()=>["tree-select"===a.type?(U(),O(K,{key:0,modelValue:a.value.value,"onUpdate:modelValue":e=>a.value.value=e,style:{width:"100%"},"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:a.placeholder,"allow-clear":"",data:e.treeData},null,8,["modelValue","onUpdate:modelValue","placeholder","data"])):J("",!0),"input"===a.type?(U(),O(L,{key:1,modelValue:a.value.value,"onUpdate:modelValue":e=>a.value.value=e,placeholder:a.placeholder,disabled:!!a.disabled&&a.disabled.value},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])):J("",!0),"icon"===a.type?(U(),O(B,{key:2,value:a.value.value,"onUpdate:value":e=>a.value.value=e},null,8,["value","onUpdate:value"])):J("",!0),"switch"===a.type?(U(),O(G,{key:3,modelValue:a.value.value,"onUpdate:modelValue":e=>a.value.value=e},null,8,["modelValue","onUpdate:modelValue"])):J("",!0)])),_:2},1032,["class","label"])))),128))])),_:1})])),_:1},8,["title","onConfirm"])])}],["__scopeId","data-v-7173715a"]]);export{T as default};
