import{g as e,G as o,a as s,b as r,e as t,X as a,f as l,h as i,i as n,j as d,k as c,l as p}from"./index-0ca45986.js";import{n as u,M as m,B as y,aI as b,Y as g}from"./@arco-design-8dabd30f.js";import{a as j,b as f,u as h,d as w,c as _,e as k}from"./columns-1685844f.js";import{d as C,h as v,a_ as T,o as S,c as R,s as x,w as L,N as z,m as A,a1 as B,C as K,Y as q,D as V,q as D,r as I}from"./@vue-2b41ce19.js";import"./pinia-b3c1485e.js";import"./axios-6371c10e.js";import"./@logicflow-85f8458e.js";import"./ids-ef071351.js";import"./lodash-es-1e3e3aa2.js";import"./preact-5fc9b0bf.js";import"./qs-f981fe00.js";import"./side-channel-01aeb4d9.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./call-bind-fae29077.js";import"./object-inspect-0eda087e.js";import"./dayjs-094145ee.js";import"./path-browserify-8c7c24dd.js";import"./vue-router-70e2faff.js";import"./@vueuse-ca9a384d.js";import"./tiny-emitter-35dc7566.js";import"./echarts-24943dbb.js";import"./zrender-2d3b2bba.js";import"./tslib-a4e99503.js";import"./xgplayer-700bd6a3.js";import"./delegate-ef66b241.js";import"./downloadjs-91c0ea73.js";import"./quill-ecb3881d.js";import"./sortablejs-2f5483e3.js";import"./b-tween-5055d79e.js";import"./b-validate-457088db.js";import"./resize-observer-polyfill-ad543aa3.js";import"./scroll-into-view-if-needed-59a60a09.js";import"./compute-scroll-into-view-2962e95c.js";import"./number-precision-d9b928a1.js";import"./dict-9c237ae6.js";const M={class:"main-container"},P=C({__name:"operlog",setup(C){const P=j(ee),U=f(),{selectedRowKeys:E,onSelectionChange:N,showCheckedAll:O}=h(),{onSorterChange:Y,sortOrder:$}=w(ee),{bordered:F,striped:G,handleSuccess:H,tableLoading:J,dataList:X}=U,Q=k("operId"),{operlog:W}=_(),Z=W;async function ee(){J.value=!0;try{const{code:o,rows:s,msg:t,total:a}=await(async o=>await e({url:"/system/operlog/list",data:o}))({pageNum:P.page,pageSize:P.pageSize,orderByColumn:$.orderBy,isAsc:$.isAsc,...r(Z)}),l={code:o,msg:t,data:s};J.value=!1,H(I(l)),P.setTotalSize(a||10)}catch(o){}}function oe(){Z.forEach((e=>{e.searchReset?e.searchReset():e.searchValue=void 0})),ee()}const se=e=>{const s=e.operId;u.confirm({title:"提示",content:`确定要${e?"删除此":"删除所选择的"}数据吗？`,cancelText:"取消",okText:"删除",onOk:async()=>{try{const{msg:e}=s?await(async e=>await o({url:`/system/operlog/${e}`}))(s):await(async()=>await o({url:"/system/operlog/clean"}))();m.success(e),ee()}catch(e){}}})},re=()=>{t(a,r(Z),"操作日志")};return v(ee),(e,o)=>{const r=y,t=l,a=i,u=n,m=b,j=g,f=d,h=c,w=p,_=T("hasPerm");return S(),R("div",M,[x(w,{ref:"tableBody"},{header:L((()=>[x(u,{"show-filter":!0,title:"",onSearch:ee,onResetSearch:oe},{"more-button-content":L((()=>[z((S(),A(r,{type:"primary",loading:B(s),onClick:re},{default:L((()=>[K(" 导出操作日志 ")])),_:1},8,["loading"])),[[_,["system:log:operlog:export"]]]),z((S(),A(r,{status:"warning",onClick:se},{default:L((()=>[K("清空操作日志")])),_:1})),[[_,["system:log:operlog:remove"]]])])),"search-content":L((()=>[x(t,{modelValue:B(Z),"onUpdate:modelValue":o[0]||(o[0]=e=>q(Z)?Z.value=e:null)},null,8,["modelValue"])])),"table-config":L((()=>[x(a,{tableColumns:B(Z),"onUpdate:border":o[1]||(o[1]=e=>B(U).bordered.value=e),"onUpdate:striped":o[2]||(o[2]=e=>B(U).striped.value=e),onDoRefresh:ee},null,8,["tableColumns"])])),_:1})])),default:L((()=>[x(f,{bordered:B(F),striped:B(G),tableLoading:B(J),dataList:B(X),tableColumns:B(Z),rowKey:B(Q),onSelectionChange:B(N),onSorterChange:B(Y),selectedRowKeys:B(E),showCheckedAll:B(O)},{optional:L((({record:e})=>[z((S(),A(r,{status:"danger",onClick:o=>se(e)},{default:L((()=>[K("删除 ")])),_:2},1032,["onClick"])),[[_,["system:log:operlog:remove"]]])])),operParam:L((({record:e})=>[x(m,{code:""},{default:L((()=>[K(V(e.operParam),1)])),_:2},1024)])),status:L((({record:e})=>[0===e.status?(S(),A(j,{key:0,bordered:"",color:"green"},{default:L((()=>[K("正常")])),_:1})):1===e.status?(S(),A(j,{key:1,bordered:"",color:"red"},{default:L((()=>[K("异常")])),_:1})):D("",!0)])),jsonResult:L((({record:e})=>[x(m,{code:""},{default:L((()=>[K(V(e.jsonResult),1)])),_:2},1024)])),errorMsg:L((({record:e})=>[x(m,{code:""},{default:L((()=>[K(V(e.errorMsg),1)])),_:2},1024)])),businessType:L((({record:e})=>[0===e.businessType?(S(),A(j,{key:0,bordered:"",color:"green"},{default:L((()=>[K("新增")])),_:1})):1===e.businessType?(S(),A(j,{key:1,bordered:"",color:"yellow"},{default:L((()=>[K("修改")])),_:1})):2===e.businessType?(S(),A(j,{key:2,bordered:"",color:"red"},{default:L((()=>[K("删除")])),_:1})):3===e.businessType?(S(),A(j,{key:3,bordered:"",color:"lime"},{default:L((()=>[K("授权")])),_:1})):4===e.businessType?(S(),A(j,{key:4,bordered:"",color:"cyan"},{default:L((()=>[K("导出")])),_:1})):5===e.businessType?(S(),A(j,{key:5,bordered:"",color:"purple"},{default:L((()=>[K("导入")])),_:1})):6===e.businessType?(S(),A(j,{key:6,bordered:"",color:"magenta"},{default:L((()=>[K("强退")])),_:1})):7===e.businessType?(S(),A(j,{key:7,bordered:"",color:"pinkpurple"},{default:L((()=>[K("生成代码")])),_:1})):8===e.businessType?(S(),A(j,{key:8,bordered:"",color:"orangered"},{default:L((()=>[K("清空数据")])),_:1})):D("",!0)])),_:1},8,["bordered","striped","tableLoading","dataList","tableColumns","rowKey","onSelectionChange","onSorterChange","selectedRowKeys","showCheckedAll"])])),footer:L((()=>[x(h,{pagination:B(P)},null,8,["pagination"])])),_:1},512)])}}});export{P as default};
