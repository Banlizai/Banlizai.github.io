import{g as t,A as e,p as s,G as a,u as o,a as i,e as r,V as n,b as l,w as c,f as d,h as m,i as p,j as u,k as y,l as j,m as h,M as f}from"./index-0ca45986.js";import{M as g,n as w,B as b,Y as v}from"./@arco-design-8dabd30f.js";import{a as C,b as k,u as S,c as _,d as x,e as A}from"./columns-1685844f.js";import{d as D,u as R,h as L,a_ as O,o as z,c as B,f as K,s as E,w as I,N as T,m as U,a1 as V,C as q,Y as $,D as F,F as M,r as N}from"./@vue-2b41ce19.js";import{a as P}from"./@vueuse-ca9a384d.js";import"./pinia-b3c1485e.js";import"./axios-6371c10e.js";import"./@logicflow-85f8458e.js";import"./ids-ef071351.js";import"./lodash-es-1e3e3aa2.js";import"./preact-5fc9b0bf.js";import"./qs-f981fe00.js";import"./side-channel-01aeb4d9.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./call-bind-fae29077.js";import"./object-inspect-0eda087e.js";import"./dayjs-094145ee.js";import"./path-browserify-8c7c24dd.js";import"./vue-router-70e2faff.js";import"./tiny-emitter-35dc7566.js";import"./echarts-24943dbb.js";import"./zrender-2d3b2bba.js";import"./tslib-a4e99503.js";import"./xgplayer-700bd6a3.js";import"./delegate-ef66b241.js";import"./downloadjs-91c0ea73.js";import"./quill-ecb3881d.js";import"./sortablejs-2f5483e3.js";import"./b-tween-5055d79e.js";import"./b-validate-457088db.js";import"./resize-observer-polyfill-ad543aa3.js";import"./scroll-into-view-if-needed-59a60a09.js";import"./compute-scroll-into-view-2962e95c.js";import"./number-precision-d9b928a1.js";import"./dict-9c237ae6.js";const Y={class:"main-container"},G=D({__name:"dict",setup(D){R(!1);const{ADD:G,UPDATE:H}=f,J=o(),Q=R(null),W=C(ut),X=k(),{selectedRowKeys:Z,onSelectionChange:tt,showCheckedAll:et}=S(),{bordered:st,striped:at,handleSuccess:ot,tableLoading:it,dataList:rt}=X,nt=A("dictId"),{dict:lt}=_(),ct=lt,{onSorterChange:dt,sortOrder:mt}=x(ut),pt=async()=>{try{r(n,l(ct),"字典管理")}catch(t){}};async function ut(){it.value=!0;try{const{code:e,rows:s,msg:a,total:o}=await(async e=>await t({url:"/system/dict/type/list",data:e}))({pageNum:W.page,pageSize:W.pageSize,orderByColumn:mt.orderBy,isAsc:mt.isAsc,...l(ct)}),i={code:e,msg:a,data:s};it.value=!1,ot(N(i)),W.setTotalSize(o||10)}catch(e){}}function yt(){ct.forEach((t=>{t.searchReset?t.searchReset():t.searchvalue=void 0})),ut()}const jt=t=>{const e=t.dictId||Z.value.toString();e?w.confirm({title:"提示",content:`确定要${t?"删除此":"删除所选择的"}数据吗？`,cancelText:"取消",okText:"删除",onOk:async()=>{try{const{msg:t}=await(async t=>await a({url:`/system/dict/type/${t}`}))(e);g.success(t),ut()}catch(t){}}}):g.error("请选择要删除的数据")};function ht(){var t;J.title=G,J.itemOption=ct,null==(t=Q.value)||t.show()}const ft=async()=>{var t;try{const a=J.itemOption.find((t=>"dictId"===t.key)),o=c(J.itemOption),{msg:i}=(null==a?void 0:a.value)?await(async t=>await s({url:"/system/dict/type",data:t}))(o):await(async t=>await e({url:"/system/dict/type",data:t}))(o);g.success(i),null==(t=Q.value)||t.close(),ut()}catch(a){}},gt=P((async({record:e})=>{try{const{data:s}=await(async e=>await t({url:`/system/dict/type/${e}`}))(e.dictId);ct.forEach((t=>{t.value=s[t.key]}))}catch(s){}}),300);return L(ut),(t,e)=>{const s=b,a=d,o=m,r=p,n=v,l=u,c=y,f=j,g=h,w=O("hasPerm");return z(),B(M,null,[K("div",Y,[E(f,{ref:"tableBody"},{header:I((()=>[E(r,{"show-filter":!0,title:"",onSearch:ut,onResetSearch:yt},{"more-button-content":I((()=>[T((z(),U(s,{type:"primary",loading:V(i),onClick:pt},{default:I((()=>[q(" 导出字典 ")])),_:1},8,["loading"])),[[w,["system:dict:export"]]]),T((z(),U(s,{type:"primary",onClick:ht},{default:I((()=>[q(" 添加 ")])),_:1})),[[w,["system:dict:add"]]]),T((z(),U(s,{status:"danger",onClick:jt},{default:I((()=>[q("删除")])),_:1})),[[w,["system:dict:remove"]]])])),"search-content":I((()=>[E(a,{modelValue:V(ct),"onUpdate:modelValue":e[0]||(e[0]=t=>$(ct)?ct.value=t:null)},null,8,["modelValue"])])),"table-config":I((()=>[E(o,{tableColumns:V(ct),"onUpdate:border":e[1]||(e[1]=t=>V(X).bordered.value=t),"onUpdate:striped":e[2]||(e[2]=t=>V(X).striped.value=t),onDoRefresh:ut},null,8,["tableColumns"])])),_:1})])),default:I((()=>[E(l,{bordered:V(st),striped:V(at),tableLoading:V(it),dataList:V(rt),tableColumns:V(ct),rowKey:V(nt),onSelectionChange:V(tt),selectedRowKeys:V(Z),showCheckedAll:V(et),onSorterChange:V(dt)},{optional:I((({record:t})=>[T((z(),U(s,{type:"primary",onClick:e=>(async t=>{var e;J.title=H,J.itemOption=ct,null==(e=Q.value)||e.show(),await gt({record:t})})(t)},{default:I((()=>[q("编辑")])),_:2},1032,["onClick"])),[[w,["system:dict:edit"]]]),T((z(),U(s,{status:"danger",onClick:e=>jt(t)},{default:I((()=>[q("删除")])),_:2},1032,["onClick"])),[[w,["system:dict:remove"]]])])),status:I((({record:t})=>[E(n,{color:1===t.status?"green":"red"},{default:I((()=>[q(F(1===t.status?"正常":"禁用"),1)])),_:2},1032,["color"])])),_:1},8,["bordered","striped","tableLoading","dataList","tableColumns","rowKey","onSelectionChange","selectedRowKeys","showCheckedAll","onSorterChange"])])),footer:I((()=>[E(c,{pagination:V(W)},null,8,["pagination"])])),_:1},512)]),E(g,{ref_key:"modalDialog",ref:Q,config:V(J),onConfirm:ft},null,8,["config"])],64)}}});export{G as default};
