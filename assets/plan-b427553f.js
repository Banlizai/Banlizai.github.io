import{_ as e,a,b as s,e as l,O as o,f as t,h as i,i as r,j as n,k as d,l as c,n as u}from"./index-0ca45986.js";import{M as p,n as m,i as f,B as v,Y as b,ao as j,N as h}from"./@arco-design-8dabd30f.js";import{a as _,b as g,u as y,d as C,c as w,e as k}from"./columns-1685844f.js";import{d as S,e as x,f as V}from"./plan-d5704754.js";import{d as A}from"./dayjs-094145ee.js";import{u as R}from"./dict-9c237ae6.js";import{d as P,ar as E,u as D,a_ as I,o as L,c as T,s as U,w as z,a1 as O,f as Y,N as B,m as K,C as q,Y as H,D as M,r as N}from"./@vue-2b41ce19.js";import"./pinia-b3c1485e.js";import"./axios-6371c10e.js";import"./@logicflow-85f8458e.js";import"./ids-ef071351.js";import"./lodash-es-1e3e3aa2.js";import"./preact-5fc9b0bf.js";import"./qs-f981fe00.js";import"./side-channel-01aeb4d9.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./call-bind-fae29077.js";import"./object-inspect-0eda087e.js";import"./path-browserify-8c7c24dd.js";import"./vue-router-70e2faff.js";import"./@vueuse-ca9a384d.js";import"./tiny-emitter-35dc7566.js";import"./echarts-24943dbb.js";import"./zrender-2d3b2bba.js";import"./tslib-a4e99503.js";import"./xgplayer-700bd6a3.js";import"./delegate-ef66b241.js";import"./downloadjs-91c0ea73.js";import"./quill-ecb3881d.js";import"./sortablejs-2f5483e3.js";import"./b-tween-5055d79e.js";import"./b-validate-457088db.js";import"./resize-observer-polyfill-ad543aa3.js";import"./scroll-into-view-if-needed-59a60a09.js";import"./compute-scroll-into-view-2962e95c.js";import"./number-precision-d9b928a1.js";const F={class:"main-container"},J={class:"w-full h-full flex flex-wrap"},G=u(P({__name:"plan",setup(u){const{distribution:P,useCondition:G}=R(),Q=E((()=>e((()=>import("./index-0ca45986.js").then((e=>e.a7))),["assets/index-0ca45986.js","assets/@vue-2b41ce19.js","assets/@arco-design-8dabd30f.js","assets/b-tween-5055d79e.js","assets/b-validate-457088db.js","assets/resize-observer-polyfill-ad543aa3.js","assets/scroll-into-view-if-needed-59a60a09.js","assets/compute-scroll-into-view-2962e95c.js","assets/number-precision-d9b928a1.js","assets/dayjs-094145ee.js","assets/@logicflow-85f8458e.js","assets/ids-ef071351.js","assets/lodash-es-1e3e3aa2.js","assets/preact-5fc9b0bf.js","assets/@logicflow-4fbf093d.css","assets/@arco-design-766c8d5e.css","assets/pinia-b3c1485e.js","assets/axios-6371c10e.js","assets/qs-f981fe00.js","assets/side-channel-01aeb4d9.js","assets/get-intrinsic-bac01933.js","assets/has-symbols-456daba2.js","assets/has-proto-4a87f140.js","assets/function-bind-72d06d3b.js","assets/has-885c3436.js","assets/call-bind-fae29077.js","assets/object-inspect-0eda087e.js","assets/path-browserify-8c7c24dd.js","assets/vue-router-70e2faff.js","assets/@vueuse-ca9a384d.js","assets/tiny-emitter-35dc7566.js","assets/echarts-24943dbb.js","assets/zrender-2d3b2bba.js","assets/tslib-a4e99503.js","assets/xgplayer-700bd6a3.js","assets/delegate-ef66b241.js","assets/downloadjs-91c0ea73.js","assets/quill-ecb3881d.js","assets/quill-8e59e50e.css","assets/sortablejs-2f5483e3.js","assets/index-29e4a384.css"]))),W=E((()=>e((()=>import("./PlanIpv4-e5568442.js")),["assets/PlanIpv4-e5568442.js","assets/index-0ca45986.js","assets/@vue-2b41ce19.js","assets/@arco-design-8dabd30f.js","assets/b-tween-5055d79e.js","assets/b-validate-457088db.js","assets/resize-observer-polyfill-ad543aa3.js","assets/scroll-into-view-if-needed-59a60a09.js","assets/compute-scroll-into-view-2962e95c.js","assets/number-precision-d9b928a1.js","assets/dayjs-094145ee.js","assets/@logicflow-85f8458e.js","assets/ids-ef071351.js","assets/lodash-es-1e3e3aa2.js","assets/preact-5fc9b0bf.js","assets/@logicflow-4fbf093d.css","assets/@arco-design-766c8d5e.css","assets/pinia-b3c1485e.js","assets/axios-6371c10e.js","assets/qs-f981fe00.js","assets/side-channel-01aeb4d9.js","assets/get-intrinsic-bac01933.js","assets/has-symbols-456daba2.js","assets/has-proto-4a87f140.js","assets/function-bind-72d06d3b.js","assets/has-885c3436.js","assets/call-bind-fae29077.js","assets/object-inspect-0eda087e.js","assets/path-browserify-8c7c24dd.js","assets/vue-router-70e2faff.js","assets/@vueuse-ca9a384d.js","assets/tiny-emitter-35dc7566.js","assets/echarts-24943dbb.js","assets/zrender-2d3b2bba.js","assets/tslib-a4e99503.js","assets/xgplayer-700bd6a3.js","assets/delegate-ef66b241.js","assets/downloadjs-91c0ea73.js","assets/quill-ecb3881d.js","assets/quill-8e59e50e.css","assets/sortablejs-2f5483e3.js","assets/index-29e4a384.css","assets/plan-d5704754.js"]))),X=E((()=>e((()=>import("./PlanPie-228391b7.js")),["assets/PlanPie-228391b7.js","assets/@arco-design-8dabd30f.js","assets/@vue-2b41ce19.js","assets/b-tween-5055d79e.js","assets/b-validate-457088db.js","assets/resize-observer-polyfill-ad543aa3.js","assets/scroll-into-view-if-needed-59a60a09.js","assets/compute-scroll-into-view-2962e95c.js","assets/number-precision-d9b928a1.js","assets/dayjs-094145ee.js","assets/@logicflow-85f8458e.js","assets/ids-ef071351.js","assets/lodash-es-1e3e3aa2.js","assets/preact-5fc9b0bf.js","assets/@logicflow-4fbf093d.css","assets/@arco-design-766c8d5e.css","assets/index-0ca45986.js","assets/pinia-b3c1485e.js","assets/axios-6371c10e.js","assets/qs-f981fe00.js","assets/side-channel-01aeb4d9.js","assets/get-intrinsic-bac01933.js","assets/has-symbols-456daba2.js","assets/has-proto-4a87f140.js","assets/function-bind-72d06d3b.js","assets/has-885c3436.js","assets/call-bind-fae29077.js","assets/object-inspect-0eda087e.js","assets/path-browserify-8c7c24dd.js","assets/vue-router-70e2faff.js","assets/@vueuse-ca9a384d.js","assets/tiny-emitter-35dc7566.js","assets/echarts-24943dbb.js","assets/zrender-2d3b2bba.js","assets/tslib-a4e99503.js","assets/xgplayer-700bd6a3.js","assets/delegate-ef66b241.js","assets/downloadjs-91c0ea73.js","assets/quill-ecb3881d.js","assets/quill-8e59e50e.css","assets/sortablejs-2f5483e3.js","assets/index-29e4a384.css"]))),Z=E((()=>e((()=>import("./PlanStatus-8ec03575.js")),["assets/PlanStatus-8ec03575.js","assets/@arco-design-8dabd30f.js","assets/@vue-2b41ce19.js","assets/b-tween-5055d79e.js","assets/b-validate-457088db.js","assets/resize-observer-polyfill-ad543aa3.js","assets/scroll-into-view-if-needed-59a60a09.js","assets/compute-scroll-into-view-2962e95c.js","assets/number-precision-d9b928a1.js","assets/dayjs-094145ee.js","assets/@logicflow-85f8458e.js","assets/ids-ef071351.js","assets/lodash-es-1e3e3aa2.js","assets/preact-5fc9b0bf.js","assets/@logicflow-4fbf093d.css","assets/@arco-design-766c8d5e.css","assets/dict-9c237ae6.js","assets/pinia-b3c1485e.js","assets/index-0ca45986.js","assets/axios-6371c10e.js","assets/qs-f981fe00.js","assets/side-channel-01aeb4d9.js","assets/get-intrinsic-bac01933.js","assets/has-symbols-456daba2.js","assets/has-proto-4a87f140.js","assets/function-bind-72d06d3b.js","assets/has-885c3436.js","assets/call-bind-fae29077.js","assets/object-inspect-0eda087e.js","assets/path-browserify-8c7c24dd.js","assets/vue-router-70e2faff.js","assets/@vueuse-ca9a384d.js","assets/tiny-emitter-35dc7566.js","assets/echarts-24943dbb.js","assets/zrender-2d3b2bba.js","assets/tslib-a4e99503.js","assets/xgplayer-700bd6a3.js","assets/delegate-ef66b241.js","assets/downloadjs-91c0ea73.js","assets/quill-ecb3881d.js","assets/quill-8e59e50e.css","assets/sortablejs-2f5483e3.js","assets/index-29e4a384.css","assets/PlanStatus-7a1ebf3b.css"]))),$=D(.25),ee=_(je),ae=g(),{selectedRowKeys:se,onSelectionChange:le,showCheckedAll:oe}=y(),{onSorterChange:te,sortOrder:ie}=C(je),{bordered:re,striped:ne,handleSuccess:de,tableLoading:ce,dataList:ue}=ae,pe=k("id"),{ipAddressPlan:me}=w(),fe=me,ve=D(!1),be=D([{label:"未分配",value:0},{label:"已分配",value:0},{label:"预留",value:0},{label:"已使用",value:0},{label:"未使用",value:0},{label:"未扫描",value:0}]);async function je(){try{const{code:e,rows:a,msg:l,total:o}=await S({pageNum:ee.page,pageSize:ee.pageSize,orderByColumn:ie.orderBy,isAsc:ie.isAsc,...s(fe)});de(N({code:e,msg:l,data:a})),ee.setTotalSize(o||10);const{segmentId:t}=s(fe);!async function(e){try{ve.value=!0;const{data:a}=await V(e);ve.value=!1,be.value.forEach((e=>{switch(e.label){case"未分配":e.value=a.free;break;case"已分配":e.value=a.assigned;break;case"预留":e.value=a.reserved;break;case"已使用":e.value=a.used;break;case"未使用":e.value=a.unUsed;break;case"未扫描":e.value=a.unScan}}))}catch(a){}}(t)}catch(e){}}function he(){fe.forEach((e=>{"segmentId"!==e.key&&(e.searchReset?e.searchReset():e.searchValue=void 0)})),je()}const _e=()=>{l(o,s(fe),"操作日志")};async function ge(e,a=void 0){const s=a?[a]:se.value;if(0===s.length)return p.warning("请选择IP地址");m.confirm({title:"提示",content:"是否对选中IP进行确认操作？",cancelText:"取消",okText:"确认",onOk:async()=>{try{const a={allocationState:e,ids:s},{msg:l}=await x(a);p.success(l),je(),se.value=[]}catch(a){}}})}return(e,s)=>{const l=f,o=v,u=t,p=i,m=r,_=b,g=j,y=n,C=d,w=c,k=h,S=I("hasPerm");return L(),T("div",F,[U(O(Q),{class:"w-full h-full"},{tree:z((()=>[U(O(W),{columns:O(fe),onUpdate:je},null,8,["columns"])])),table:z((()=>[Y("div",J,[U(k,{class:"h-full",size:$.value,"onUpdate:size":s[8]||(s[8]=e=>$.value=e),min:"100px",direction:"vertical"},{first:z((()=>[U(l,{class:"w-full h-full"},{default:z((()=>[U(O(X),{modelValue:be.value,"onUpdate:modelValue":s[0]||(s[0]=e=>be.value=e),loading:ve.value},null,8,["modelValue","loading"])])),_:1})])),second:z((()=>[U(l,{class:"w-full h-full"},{default:z((()=>[U(w,{ref:"tableBody",class:"w-full h-full"},{header:z((()=>[U(m,{"show-filter":!0,title:"",onSearch:je,onResetSearch:he},{"more-button-content":z((()=>[B((L(),K(o,{type:"primary",onClick:s[1]||(s[1]=e=>ge(1))},{default:z((()=>[q(" 批量分配 ")])),_:1})),[[S,["ipaddress:plan:batchDistribution"]]]),B((L(),K(o,{type:"primary",onClick:s[2]||(s[2]=e=>ge(0))},{default:z((()=>[q(" 批量回收 ")])),_:1})),[[S,["ipaddress:plan:batchRecycling"]]]),B((L(),K(o,{type:"primary",onClick:s[3]||(s[3]=e=>ge(2))},{default:z((()=>[q(" 批量预留 ")])),_:1})),[[S,["ipaddress:plan:batchReservation"]]]),B((L(),K(o,{type:"primary",loading:O(a),onClick:_e},{default:z((()=>[q(" 导出 ")])),_:1},8,["loading"])),[[S,["ipaddress:plan:export"]]])])),"search-content":z((()=>[U(u,{modelValue:O(fe),"onUpdate:modelValue":s[4]||(s[4]=e=>H(fe)?fe.value=e:null)},null,8,["modelValue"])])),"table-status":z((()=>[U(O(Z),{columns:O(fe),modelValue:be.value,"onUpdate:modelValue":s[5]||(s[5]=e=>be.value=e),onUpdate:je},null,8,["columns","modelValue"])])),"table-config":z((()=>[U(p,{tableColumns:O(fe),"onUpdate:border":s[6]||(s[6]=e=>O(ae).bordered.value=e),"onUpdate:striped":s[7]||(s[7]=e=>O(ae).striped.value=e),onDoRefresh:je},null,8,["tableColumns"])])),_:1})])),default:z((()=>[U(y,{bordered:O(re),striped:O(ne),tableLoading:O(ce),dataList:O(ue),tableColumns:O(fe),rowKey:O(pe),onSelectionChange:O(le),onSorterChange:O(te),selectedRowKeys:O(se),showCheckedAll:O(oe)},{updateTime:z((({record:e})=>[q(M(O(A)(e.updateTime).format("YYYY-MM-DD HH:mm:ss")),1)])),ipAddress:z((({record:e})=>[U(_,null,{default:z((()=>[q(M(e.ipAddress),1)])),_:2},1024)])),allocationState:z((({record:e})=>[U(_,{color:0===e.allocationState?"green":1===e.allocationState?"blue":"gold"},{default:z((()=>{return[q(M((a=e.allocationState,null==(s=P.find((e=>e.value==a)))?void 0:s.label)),1)];var a,s})),_:2},1032,["color"])])),serviceCondition:z((({record:e})=>[U(_,{color:0===e.serviceCondition?"green":1===e.serviceCondition?"blue":"gold"},{default:z((()=>{return[q(M((a=e.serviceCondition,null==(s=G.find((e=>e.value==a)))?void 0:s.label)),1)];var a,s})),_:2},1032,["color"])])),optional:z((({record:e})=>[U(g,null,{default:z((()=>[B((L(),K(o,{type:"text",onClick:a=>ge(1,e.id)},{default:z((()=>[q(" 分配 ")])),_:2},1032,["onClick"])),[[S,["ipaddress:plan:distribution"]]]),B((L(),K(o,{type:"text",onClick:a=>ge(0,e.id)},{default:z((()=>[q(" 回收 ")])),_:2},1032,["onClick"])),[[S,["ipaddress:plan:recycling"]]]),B((L(),K(o,{type:"text",onClick:a=>ge(2,e.id)},{default:z((()=>[q(" 预留 ")])),_:2},1032,["onClick"])),[[S,["ipaddress:plan:reserved"]]])])),_:2},1024)])),_:1},8,["bordered","striped","tableLoading","dataList","tableColumns","rowKey","onSelectionChange","onSorterChange","selectedRowKeys","showCheckedAll"])])),footer:z((()=>[U(C,{pagination:O(ee)},null,8,["pagination"])])),_:1},512)])),_:1})])),_:1},8,["size"])])])),_:1})])}}}),[["__scopeId","data-v-bac29336"]]);export{G as default};
